# /// script
# dependencies = []
# 
# [tool.griptape-nodes]
# name = "Nano Banana Pro - Product Advertisement"
# schema_version = "0.14.0"
# engine_version_created_with = "0.66.0"
# node_libraries_referenced = [["Griptape Nodes Library", "0.52.7"]]
# node_types_used = [["Griptape Nodes Library", "Agent"], ["Griptape Nodes Library", "EndFlow"], ["Griptape Nodes Library", "GoogleImageGeneration"], ["Griptape Nodes Library", "KeyValuePair"], ["Griptape Nodes Library", "MergeTexts"], ["Griptape Nodes Library", "Note"], ["Griptape Nodes Library", "Ruleset"], ["Griptape Nodes Library", "StartFlow"]]
# description = "Create an example product advertisement using Google Gemini Nano Banana Pro and Text to Image to generate an image, and OpenAI gpt-4.1-mini to help design the prompt."
# is_griptape_provided = true
# is_template = true
# creation_date = 2025-12-18T16:26:59.957138Z
# last_modified_date = "2025-12-18T16:48:46.997778Z"
# workflow_shape = "{\"inputs\":{\"Start Flow\":{\"exec_out\":{\"name\":\"exec_out\",\"tooltip\":\"Connection to the next node in the execution chain\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Flow Out\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"product\":{\"name\":\"product\",\"tooltip\":\"Enter text/string for product.\",\"type\":\"str\",\"input_types\":[\"str\"],\"output_type\":\"str\",\"default_value\":\"salt shaker\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"is_custom\":true,\"is_user_added\":true},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"company_name\":{\"name\":\"company_name\",\"tooltip\":\"Enter text/string for company_name.\",\"type\":\"str\",\"input_types\":[\"str\"],\"output_type\":\"str\",\"default_value\":\"rocks 'n things\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"is_custom\":true,\"is_user_added\":true},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"company_description\":{\"name\":\"company_description\",\"tooltip\":\"Enter text/string for company_description.\",\"type\":\"str\",\"input_types\":[\"str\"],\"output_type\":\"str\",\"default_value\":\"gritty downtown coffee and kitchen supply\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"is_custom\":true,\"is_user_added\":true},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null}}},\"outputs\":{\"End Flow\":{\"exec_in\":{\"name\":\"exec_in\",\"tooltip\":\"Control path when the flow completed successfully\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Succeeded\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"failed\":{\"name\":\"failed\",\"tooltip\":\"Control path when the flow failed\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Failed\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"was_successful\":{\"name\":\"was_successful\",\"tooltip\":\"Indicates whether it completed without errors.\",\"type\":\"bool\",\"input_types\":[\"bool\"],\"output_type\":\"bool\",\"default_value\":false,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{},\"settable\":false,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"result_details\":{\"name\":\"result_details\",\"tooltip\":\"Details about the operation result\",\"type\":\"str\",\"input_types\":[\"str\"],\"output_type\":\"str\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"multiline\":true,\"placeholder_text\":\"Details about the completion or failure will be shown here.\"},\"settable\":false,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"image\":{\"name\":\"image\",\"tooltip\":\"New parameter\",\"type\":\"ImageUrlArtifact\",\"input_types\":[\"ImageUrlArtifact\"],\"output_type\":\"ImageUrlArtifact\",\"default_value\":\"\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"is_full_width\":true,\"pulse_on_run\":true,\"is_custom\":true,\"is_user_added\":true},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":\"\",\"parent_element_name\":null}}}}"
# image = "https://raw.githubusercontent.com/griptape-ai/griptape-nodes/refs/heads/main/libraries/griptape_nodes_library/workflows/templates/thumbnail_nano_banana_pro_-_product_advertisement.webp"
# 
# ///

import argparse
import asyncio
import json
import pickle
from griptape.artifacts.image_url_artifact import ImageUrlArtifact
from griptape.rules.ruleset import Ruleset
from griptape_nodes.bootstrap.workflow_executors.local_workflow_executor import LocalWorkflowExecutor
from griptape_nodes.bootstrap.workflow_executors.workflow_executor import WorkflowExecutor
from griptape_nodes.drivers.storage.storage_backend import StorageBackend
from griptape_nodes.node_library.library_registry import IconVariant, NodeDeprecationMetadata, NodeMetadata
from griptape_nodes.retained_mode.events.connection_events import CreateConnectionRequest
from griptape_nodes.retained_mode.events.flow_events import CreateFlowRequest, GetTopLevelFlowRequest, GetTopLevelFlowResultSuccess
from griptape_nodes.retained_mode.events.library_events import LoadLibrariesRequest
from griptape_nodes.retained_mode.events.node_events import CreateNodeRequest
from griptape_nodes.retained_mode.events.parameter_events import AddParameterToNodeRequest, AlterParameterDetailsRequest, SetParameterValueRequest
from griptape_nodes.retained_mode.griptape_nodes import GriptapeNodes

GriptapeNodes.handle_request(LoadLibrariesRequest())

context_manager = GriptapeNodes.ContextManager()

if not context_manager.has_current_workflow():
    context_manager.push_workflow(workflow_name='Nano Banana Pro - Product Advertisement')

"""
1. We've collated all of the unique parameter values into a dictionary so that we do not have to duplicate them.
   This minimizes the size of the code, especially for large objects like serialized image files.
2. We're using a prefix so that it's clear which Flow these values are associated with.
3. The values are serialized using pickle, which is a binary format. This makes them harder to read, but makes
   them consistently save and load. It allows us to serialize complex objects like custom classes, which otherwise
   would be difficult to serialize.
"""
top_level_unique_values_dict = {'10bf13cc-b477-4d90-b129-8b1532a821fe': pickle.loads(b'\x80\x04\x95\x0f\x00\x00\x00\x00\x00\x00\x00\x8c\x0bsalt shaker\x94.'), '89092bc7-aca0-4f69-a67e-dd56aa25e810': pickle.loads(b'\x80\x04\x95\x14\x00\x00\x00\x00\x00\x00\x00\x8c\x10concrete kitchen\x94.'), '7268fb5e-d50b-441b-bc86-f6582068992f': pickle.loads(b'\x80\x04\x95/\x00\x00\x00\x00\x00\x00\x00\x8c+a gritty punk rock kitchen hardware company\x94.'), '85ffb073-434b-43a3-b8d3-f1e93e539bc2': pickle.loads(b'\x80\x04\x95\xe1\x0e\x00\x00\x00\x00\x00\x00}\x94(\x8c\x04type\x94\x8c\x12GriptapeNodesAgent\x94\x8c\x08rulesets\x94]\x94}\x94(h\x01\x8c\x07Ruleset\x94\x8c\x02id\x94\x8c e059787a117e4ceeb4c558fb6828c711\x94\x8c\x04name\x94\x8c\x18nano banana prompt guide\x94\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(}\x94(h\x01\x8c\x04Rule\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94u}\x94(h\x01h\x10h\x11\x8c9Be specific and always include the following information:\x94u}\x94(h\x01h\x10h\x11X\xac\x02\x00\x00subject: Who and what in the image, for example, a bartender\ncomposition: Camera movements, scene shots and framing like low angle shot, close-up, wide shot\naction: What is happening in the image, for example, working out, eating mortadella, etc or timeline, diagram etc.\nsetting/location: where is the scene taking place, for example, roadside gym, kitchen in golden hour, futuristic cafe\nstyle: the art type, the look and feel like realistic, product shoot, oil painting, scribble or line art, film scene, group photo\ncamera lens, shadow and lighting details: here you get a change to direct your image with details like f/1.8, long shadows, natural daylight, muted warm tones, etc.\x94u}\x94(h\x01h\x10h\x11\x8c\xaaWhen working with text, include\ntext rendering: actual text in inverted commas and its placement, typography style like bold, italic, display style in the top left corner\x94u}\x94(h\x01h\x10h\x11\x8c\xc6factual details: topic and scientific details like grungy broken plastic, or east 66th street\nreference inputs: mark the role of each input image for character, style, environment, background, etc.\n\x94ueuah\r]\x94h\x07\x8c 053141cffafa40f39d9a7b661e23f932\x94\x8c\x13conversation_memory\x94}\x94(h\x01\x8c\x12ConversationMemory\x94\x8c\x04runs\x94]\x94}\x94(h\x01\x8c\x03Run\x94h\x07\x8c 205701bd7f7d4742abe22375200b4d5c\x94h\x0bN\x8c\x05input\x94}\x94(h\x01\x8c\x0cTextArtifact\x94h\x07\x8c 16e8026e22a343f2b15b9585e9e092ab\x94\x8c\treference\x94Nh\x0b}\x94h\th(h\x11Xx\x01\x00\x00Create an image generation prompt for a magazine ad for the following product created by the company described. Include some entertaining copy about what makes the product unique.\n\nIt should feel authentic and like a photo from a glossy magazine.\n{\'product\': \'salt shaker\'}\n{\'company\': \'concrete kitchen\'}\n{\'company description\': \'a gritty punk rock kitchen hardware company\'}\x94u\x8c\x06output\x94}\x94(h\x01h\'h\x07\x8c a21e8839d8814f4a9cddc44b3fb05154\x94h)Nh\x0b}\x94\x8c\x0fis_react_prompt\x94\x89sh\th.h\x11X\x02\x05\x00\x00Subject: A sleek, industrial salt shaker with a raw concrete texture and metal accents  \nComposition: Close-up shot with a shallow depth of field focusing on the salt shaker held in a hand with tattoos and punk-style rings, slightly tilted as salt pours out  \nAction: Salt being sprinkled onto a rustic wooden table with scattered peppercorns and a vintage knife nearby  \nSetting/Location: Urban loft kitchen with exposed brick walls, metal pipes, and dim moody lighting, evoking a gritty punk rock vibe  \nStyle: High-contrast, hyper-realistic glossy magazine photo with a tactile, gritty feel  \nCamera lens, shadow and lighting details: f/2.8 lens for sharp focus on the shaker, natural window light from the side casting long shadows, muted cool tones with a hint of warm highlights on the concrete texture  \nText rendering: Bold white text in the top left corner reading "Concrete Kitchen: Shake Up Your Flavor" in a distressed, stencil font style  \nFactual details: The salt shaker is made from raw concrete and stainless steel, embodying punk rock toughness and kitchen utility  \nCopy: "Not your grandma\xe2\x80\x99s salt shaker. Concrete Kitchen brings you the grit and grind of punk rock right to your countertop. Built tough, designed raw \xe2\x80\x94 because seasoning should never be soft."\x94uuah\x0b}\x94\x8c\x08max_runs\x94Nu\x8c\x1cconversation_memory_strategy\x94\x8c\rper_structure\x94\x8c\x05tasks\x94]\x94}\x94(h\x01\x8c\nPromptTask\x94h\x03]\x94h\r]\x94h\x07\x8c f3ea8afee4fe4715b7acc1e14e1f330b\x94\x8c\x05state\x94\x8c\x0eState.FINISHED\x94\x8c\nparent_ids\x94]\x94\x8c\tchild_ids\x94]\x94\x8c\x17max_meta_memory_entries\x94K\x14\x8c\x07context\x94}\x94\x8c\rprompt_driver\x94}\x94(h\x01\x8c\x19GriptapeCloudPromptDriver\x94\x8c\x0btemperature\x94G?\xb9\x99\x99\x99\x99\x99\x9a\x8c\nmax_tokens\x94N\x8c\x06stream\x94\x88\x8c\x0cextra_params\x94}\x94\x8c\x05model\x94\x8c\x0cgpt-4.1-mini\x94\x8c\x1astructured_output_strategy\x94\x8c\x06native\x94u\x8c\x05tools\x94]\x94\x8c\x0cmax_subtasks\x94K\x14uau.'), '0e0fed8c-49a3-4023-898e-2349b77b4580': pickle.loads(b'\x80\x04\x95\x10\x00\x00\x00\x00\x00\x00\x00\x8c\x0cgpt-4.1-mini\x94.'), 'e70b0b9a-e60c-4d62-979c-b0ff28978400': pickle.loads(b'\x80\x04\x95\xfa\x00\x00\x00\x00\x00\x00\x00\x8c\xf6Create an image generation prompt for a magazine ad for the following product created by the company described. Include some entertaining copy about what makes the product unique.\n\nIt should feel authentic and like a photo from a glossy magazine.\x94.'), 'ea4889b1-8247-42ee-8fb6-156a9b471ea7': pickle.loads(b"\x80\x04\x95\x85\x00\x00\x00\x00\x00\x00\x00\x8c\x81{'product': 'salt shaker'}\n{'company': 'concrete kitchen'}\n{'company description': 'a gritty punk rock kitchen hardware company'}\x94."), '77017d67-1b59-492d-80cb-e3d3b49ae7a4': pickle.loads(b'\x80\x04]\x94.'), '84a8ec28-c0a3-4a09-9dfe-0ec753941cab': pickle.loads(b'\x80\x04\x95\xcd\x06\x00\x00\x00\x00\x00\x00]\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x07Ruleset\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x07Ruleset\x94\x8c\x0bmodule_name\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x02id\x94\x8c e059787a117e4ceeb4c558fb6828c711\x94\x8c\x04name\x94\x8c\x18nano banana prompt guide\x94\x8c\x0eruleset_driver\x94\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x12LocalRulesetDriver\x94\x93\x94)\x81\x94}\x94(h\x06\x8c\x12LocalRulesetDriver\x94h\x08\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x0fraise_not_found\x94\x88\x8c\x0bpersist_dir\x94Nub\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(\x8c\x13griptape.rules.rule\x94\x8c\x04Rule\x94\x93\x94)\x81\x94}\x94(h\x06\x8c\x04Rule\x94h\x08\x8c\x13griptape.rules.rule\x94h\x18}\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c9Be specific and always include the following information:\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$X\xac\x02\x00\x00subject: Who and what in the image, for example, a bartender\ncomposition: Camera movements, scene shots and framing like low angle shot, close-up, wide shot\naction: What is happening in the image, for example, working out, eating mortadella, etc or timeline, diagram etc.\nsetting/location: where is the scene taking place, for example, roadside gym, kitchen in golden hour, futuristic cafe\nstyle: the art type, the look and feel like realistic, product shoot, oil painting, scribble or line art, film scene, group photo\ncamera lens, shadow and lighting details: here you get a change to direct your image with details like f/1.8, long shadows, natural daylight, muted warm tones, etc.\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xaaWhen working with text, include\ntext rendering: actual text in inverted commas and its placement, typography style like bold, italic, display style in the top left corner\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xc6factual details: topic and scientific details like grungy broken plastic, or east 66th street\nreference inputs: mark the role of each input image for character, style, environment, background, etc.\n\x94ubeuba.'), '733f2dc7-d115-4fa6-af0f-5d725d97a7b9': pickle.loads(b'\x80\x04\x95\xca\x06\x00\x00\x00\x00\x00\x00\x8c\x16griptape.rules.ruleset\x94\x8c\x07Ruleset\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x07Ruleset\x94\x8c\x0bmodule_name\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x02id\x94\x8c e059787a117e4ceeb4c558fb6828c711\x94\x8c\x04name\x94\x8c\x18nano banana prompt guide\x94\x8c\x0eruleset_driver\x94\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x12LocalRulesetDriver\x94\x93\x94)\x81\x94}\x94(h\x05\x8c\x12LocalRulesetDriver\x94h\x07\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x0fraise_not_found\x94\x88\x8c\x0bpersist_dir\x94Nub\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(\x8c\x13griptape.rules.rule\x94\x8c\x04Rule\x94\x93\x94)\x81\x94}\x94(h\x05\x8c\x04Rule\x94h\x07\x8c\x13griptape.rules.rule\x94h\x17}\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c9Be specific and always include the following information:\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#X\xac\x02\x00\x00subject: Who and what in the image, for example, a bartender\ncomposition: Camera movements, scene shots and framing like low angle shot, close-up, wide shot\naction: What is happening in the image, for example, working out, eating mortadella, etc or timeline, diagram etc.\nsetting/location: where is the scene taking place, for example, roadside gym, kitchen in golden hour, futuristic cafe\nstyle: the art type, the look and feel like realistic, product shoot, oil painting, scribble or line art, film scene, group photo\ncamera lens, shadow and lighting details: here you get a change to direct your image with details like f/1.8, long shadows, natural daylight, muted warm tones, etc.\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xaaWhen working with text, include\ntext rendering: actual text in inverted commas and its placement, typography style like bold, italic, display style in the top left corner\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xc6factual details: topic and scientific details like grungy broken plastic, or east 66th street\nreference inputs: mark the role of each input image for character, style, environment, background, etc.\n\x94ubeub.'), 'f4360ed4-8b55-48e8-8be0-214d7fac382c': pickle.loads(b'\x80\x04\x95\x04\x00\x00\x00\x00\x00\x00\x00\x8c\x00\x94.'), 'b7ea98f1-a788-4568-80ec-c16119a5c2f5': pickle.loads(b'\x80\x04\x95\t\x05\x00\x00\x00\x00\x00\x00X\x02\x05\x00\x00Subject: A sleek, industrial salt shaker with a raw concrete texture and metal accents  \nComposition: Close-up shot with a shallow depth of field focusing on the salt shaker held in a hand with tattoos and punk-style rings, slightly tilted as salt pours out  \nAction: Salt being sprinkled onto a rustic wooden table with scattered peppercorns and a vintage knife nearby  \nSetting/Location: Urban loft kitchen with exposed brick walls, metal pipes, and dim moody lighting, evoking a gritty punk rock vibe  \nStyle: High-contrast, hyper-realistic glossy magazine photo with a tactile, gritty feel  \nCamera lens, shadow and lighting details: f/2.8 lens for sharp focus on the shaker, natural window light from the side casting long shadows, muted cool tones with a hint of warm highlights on the concrete texture  \nText rendering: Bold white text in the top left corner reading "Concrete Kitchen: Shake Up Your Flavor" in a distressed, stencil font style  \nFactual details: The salt shaker is made from raw concrete and stainless steel, embodying punk rock toughness and kitchen utility  \nCopy: "Not your grandma\xe2\x80\x99s salt shaker. Concrete Kitchen brings you the grit and grind of punk rock right to your countertop. Built tough, designed raw \xe2\x80\x94 because seasoning should never be soft."\x94.'), '9d65cda2-ace4-40d5-acd2-8ba4054a66f9': pickle.loads(b'\x80\x04\x89.'), 'de79206b-d7ff-4a16-8565-99c746c81782': pickle.loads(b'\x80\x04\x95N\x00\x00\x00\x00\x00\x00\x00\x8cJ[Processing..]\n[Started processing agent..]\n\n[Finished processing agent.]\n\x94.'), 'a835f448-d967-47df-9b8b-f8035f829e82': pickle.loads(b'\x80\x04\x95\x1c\x00\x00\x00\x00\x00\x00\x00\x8c\x18nano banana prompt guide\x94.'), 'cf32a276-0356-4e52-b8f3-4d703f5e649f': pickle.loads(b'\x80\x04\x95\x83\x04\x00\x00\x00\x00\x00\x00X|\x04\x00\x00**Rules for Crafting Prompts:**\n\nBe specific and always include the following information:\n\nsubject: Who and what in the image, for example, a bartender\ncomposition: Camera movements, scene shots and framing like low angle shot, close-up, wide shot\naction: What is happening in the image, for example, working out, eating mortadella, etc or timeline, diagram etc.\nsetting/location: where is the scene taking place, for example, roadside gym, kitchen in golden hour, futuristic cafe\nstyle: the art type, the look and feel like realistic, product shoot, oil painting, scribble or line art, film scene, group photo\ncamera lens, shadow and lighting details: here you get a change to direct your image with details like f/1.8, long shadows, natural daylight, muted warm tones, etc.\n\nWhen working with text, include\ntext rendering: actual text in inverted commas and its placement, typography style like bold, italic, display style in the top left corner\n\nfactual details: topic and scientific details like grungy broken plastic, or east 66th street\nreference inputs: mark the role of each input image for character, style, environment, background, etc.\n\x94.'), 'e44a855e-9d77-4f7f-aa51-9ff55df9d8e6': pickle.loads(b'\x80\x04\x88.'), '731fde86-d9bf-43e9-8e5c-d41972e27307': pickle.loads(b'\x80\x04\x95R\x00\x00\x00\x00\x00\x00\x00\x8cN[SUCCEEDED] No connection provided for success or failure, assuming successful\x94.'), 'f3269543-6788-45b8-960b-18d318350057': pickle.loads(b'\x80\x04\x95\x96\x01\x00\x00\x00\x00\x00\x00\x8c%griptape.artifacts.image_url_artifact\x94\x8c\x10ImageUrlArtifact\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x10ImageUrlArtifact\x94\x8c\x0bmodule_name\x94\x8c%griptape.artifacts.image_url_artifact\x94\x8c\x02id\x94\x8c b151759914d6498795123ed7031c6d77\x94\x8c\treference\x94N\x8c\x04meta\x94}\x94\x8c\x04name\x94\x8c\x1fgoogle_image_1766024834_0_0.jpg\x94\x8c\x16encoding_error_handler\x94\x8c\x06strict\x94\x8c\x08encoding\x94\x8c\x05utf-8\x94\x8c\x05value\x94\x8cYhttp://localhost:8124/workspace/static_files/google_image_1766024834_0_0.jpg?t=1766024834\x94ub.'), '1bc06796-15eb-46c3-9690-1fa94cc0860a': pickle.loads(b'\x80\x04\x95\x0b\x00\x00\x00\x00\x00\x00\x00\x8c\x07product\x94.'), 'd944f8f2-fe76-4789-abf0-3a1089b3fd36': pickle.loads(b'\x80\x04\x95\x1c\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x07product\x94\x8c\x0bsalt shaker\x94s.'), '63d5722c-85a7-4d8c-a464-0ae8486cbcaf': pickle.loads(b'\x80\x04\x95\x1c\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x07product\x94\x8c\x0bsalt shaker\x94s.'), '1f5b3f38-a795-4d13-8301-0ddc257da915': pickle.loads(b'\x80\x04\x95\x0b\x00\x00\x00\x00\x00\x00\x00\x8c\x07company\x94.'), '6d3acf14-a6b3-4ed9-b283-270f2004f141': pickle.loads(b'\x80\x04\x95!\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x07company\x94\x8c\x10concrete kitchen\x94s.'), 'dea2fe9c-0b5d-4f5d-b14e-df0c48b7d70f': pickle.loads(b'\x80\x04\x95!\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x07company\x94\x8c\x10concrete kitchen\x94s.'), '909f0d29-505d-482b-9b11-7d43411df79f': pickle.loads(b'\x80\x04\x95\x17\x00\x00\x00\x00\x00\x00\x00\x8c\x13company description\x94.'), '6453a546-a5e6-4fac-ae0e-e2c17a98bb41': pickle.loads(b'\x80\x04\x95H\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x13company description\x94\x8c+a gritty punk rock kitchen hardware company\x94s.'), '7cca220f-25b6-4df7-bb9d-8fb55020762b': pickle.loads(b'\x80\x04\x95H\x00\x00\x00\x00\x00\x00\x00}\x94\x8c\x13company description\x94\x8c+a gritty punk rock kitchen hardware company\x94s.'), '3d312138-aa71-4616-9eb9-1d6fd25a4b7c': pickle.loads(b"\x80\x04\x95\x1e\x00\x00\x00\x00\x00\x00\x00\x8c\x1a{'product': 'salt shaker'}\x94."), 'b944f1ee-c85a-4026-8582-1b333b4d8f93': pickle.loads(b"\x80\x04\x95#\x00\x00\x00\x00\x00\x00\x00\x8c\x1f{'company': 'concrete kitchen'}\x94."), 'f76edcad-2ad0-4f4b-8443-cf3b7250ff8e': pickle.loads(b"\x80\x04\x95J\x00\x00\x00\x00\x00\x00\x00\x8cF{'company description': 'a gritty punk rock kitchen hardware company'}\x94."), '014e3451-8116-4d3b-b6a5-27728b1680d1': pickle.loads(b'\x80\x04\x95\x06\x00\x00\x00\x00\x00\x00\x00\x8c\x02\\n\x94.'), '466ae656-9659-4677-aea4-b1f697b7f579': pickle.loads(b'\x80\x04\x95O\x02\x00\x00\x00\x00\x00\x00XH\x02\x00\x00# Nano Banana Pro - Product Advertisement\n\nThis workflow demonstrates the use of the image generation model Google Gemini [Nano Banana Pro](https://gemini.google/overview/image-generation/) to create a product advertisement based on a **product**, a **company name** and a **company description**\n\nIt uses an agent with [OpenAI gpt-4.1-mini](https://platform.openai.com/docs/models/gpt-4.1-mini) to design an image generation prompt using some behavioal rules to ensure quality responses.\n\nModify the incoming values in the **Start Flow** node and run the workflow to see the results.\x94.'), '41381fe3-1608-4a95-9fbc-04ab7f2ef7f2': pickle.loads(b'\x80\x04\x95p\x00\x00\x00\x00\x00\x00\x00\x8cl# Inputs\n\nProvide a *product*, *company name*, and *company description* to create an add for their product.\x94.'), 'cacef36a-e4a1-45b3-ade0-286fddda0a6a': pickle.loads(b'\x80\x04\x95G\x00\x00\x00\x00\x00\x00\x00\x8cCUse Key/Value pair nodes to gather the appropriate text and values.\x94.'), '82c46660-aef4-4bfb-bd55-c8aba8a58863': pickle.loads(b'\x80\x04\x95H\x00\x00\x00\x00\x00\x00\x00\x8cD# Merge Text\n\nMerge all the key value pairs into a single text node.\x94.'), 'c65612f3-a402-402c-b0a8-55b97b44122e': pickle.loads(b'\x80\x04\x95\x95\x00\x00\x00\x00\x00\x00\x00\x8c\x91Using Agents to create image generation prompts helps ensure consistency in the prompt, and allows you to be a bit more free with how you prompt.\x94.'), '64686c6e-4200-4760-98ef-beee2ff7fc17': pickle.loads(b'\x80\x04\x95\xb4\x00\x00\x00\x00\x00\x00\x00\x8c\xb0# Agent Behavior\n\nThere are many rules on the internet with best practices for using Nano Banana. Here are some that appear to work well, but feel free to extend with your own.\x94.'), '5293bebc-b569-479c-8738-b3ce9616082c': pickle.loads(b'\x80\x04\x95,\x00\x00\x00\x00\x00\x00\x00\x8c(Generate the Image using Nano Banana Pro\x94.'), '204b1a64-14a3-4ef4-b751-0fd71c2681a4': pickle.loads(b'\x80\x04\x95$\x00\x00\x00\x00\x00\x00\x00\x8c Run the flow and see the results\x94.'), 'ed15b4d7-2975-4ead-81e2-ce8487db26c5': pickle.loads(b'\x80\x04\x95\x15\x00\x00\x00\x00\x00\x00\x00\x8c\x11nano-banana-3-pro\x94.'), 'fc16b473-5af6-476a-b2e3-22e3b9a870c5': pickle.loads(b'\x80\x04]\x94.'), '625901d3-2fb8-4d5e-ba92-cd8e24591291': pickle.loads(b'\x80\x04]\x94.'), '92852550-f440-4c3a-a915-6c22687ab9d5': pickle.loads(b'\x80\x04]\x94.'), '884708c8-9ec1-43e6-83b8-34d8e8e9c0b4': pickle.loads(b'\x80\x04\x95\x07\x00\x00\x00\x00\x00\x00\x00\x8c\x031:1\x94.'), '4817eaf8-c076-4d42-90b5-95e19e85fb27': pickle.loads(b'\x80\x04\x95\x06\x00\x00\x00\x00\x00\x00\x00\x8c\x021K\x94.'), 'a27c0f48-dec1-4beb-bf29-7038c1c1eac5': pickle.loads(b'\x80\x04\x95\n\x00\x00\x00\x00\x00\x00\x00G?\xf0\x00\x00\x00\x00\x00\x00.')}

'# Create the Flow, then do work within it as context.'

flow0_name = GriptapeNodes.handle_request(CreateFlowRequest(parent_flow_name=None, flow_name='ControlFlow_1', set_as_new_context=False, metadata={})).flow_name

with GriptapeNodes.ContextManager().flow(flow0_name):
    node0_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='StartFlow', specific_library_name='Griptape Nodes Library', node_name='Start Flow', metadata={'position': {'x': -1061.5751704894092, 'y': 508.4577249729338}, 'tempId': 'placing-1765996350930-qa8fpl', 'library_node_metadata': {'category': 'workflows', 'description': 'Define the start of a workflow and pass parameters into the flow'}, 'library': 'Griptape Nodes Library', 'node_type': 'StartFlow', 'showaddparameter': True, 'size': {'width': 603, 'height': 433}, 'category': 'workflows'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node0_name):
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='product', default_value='salt shaker', tooltip='Enter text/string for product.', type='str', input_types=['str'], output_type='str', ui_options={'is_custom': True, 'is_user_added': True}, mode_allowed_input=False, mode_allowed_property=True, mode_allowed_output=True, initial_setup=True))
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='company_name', default_value="rocks 'n things", tooltip='Enter text/string for company_name.', type='str', input_types=['str'], output_type='str', ui_options={'is_custom': True, 'is_user_added': True}, mode_allowed_input=False, mode_allowed_property=True, mode_allowed_output=True, initial_setup=True))
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='company_description', default_value='gritty downtown coffee and kitchen supply', tooltip='Enter text/string for company_description.', type='str', input_types=['str'], output_type='str', ui_options={'is_custom': True, 'is_user_added': True}, mode_allowed_input=False, mode_allowed_property=True, mode_allowed_output=True, initial_setup=True))
    node1_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Agent', specific_library_name='Griptape Nodes Library', node_name='Agent_1', metadata={'position': {'x': 1979.6649600863996, 'y': 547.3773674509565}, 'tempId': 'placing-1765998525786-f45x3l', 'library_node_metadata': {'category': 'agents', 'description': 'Creates an AI agent with conversation memory and the ability to use tools'}, 'library': 'Griptape Nodes Library', 'node_type': 'Agent', 'showaddparameter': False, 'size': {'width': 607, 'height': 835}, 'category': 'agents'}, initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node1_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='additional_context', mode_allowed_property=False, initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='tools', ui_options={'hide': True}, initial_setup=True))
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', default_value=[], tooltip='Rulesets to apply to the agent to control its behavior.', type='Ruleset', input_types=['Ruleset', 'list[Ruleset]'], output_type='Ruleset', ui_options={}, mode_allowed_input=True, mode_allowed_property=False, mode_allowed_output=False, is_user_defined=True, settable=True, parent_container_name='rulesets', initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='output_schema', ui_options={'hide_property': True, 'hide': False}, initial_setup=True))
    node2_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Ruleset', specific_library_name='Griptape Nodes Library', node_name='Ruleset_1', metadata={'position': {'x': 1002.176604440061, 'y': 1364.3254929749025}, 'tempId': 'placing-1765998085117-ktqra', 'library_node_metadata': {'category': 'agents/rules', 'description': 'Give an agent a set of rules and behaviors to follow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Ruleset', 'showaddparameter': False, 'size': {'width': 860, 'height': 970}, 'category': 'agents/rules'}, resolution='resolved', initial_setup=True)).node_name
    node3_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='EndFlow', specific_library_name='Griptape Nodes Library', node_name='End Flow', metadata={'library_node_metadata': {'category': 'workflows', 'description': 'Define the end of a workflow and return parameters from the flow'}, 'library': 'Griptape Nodes Library', 'node_type': 'EndFlow', 'showaddparameter': True, 'position': {'x': 3771.5455086365287, 'y': 547.3773674509565}, 'size': {'width': 945, 'height': 1244}, 'category': 'workflows'}, initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node3_name):
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='image', default_value='', tooltip='New parameter', type='ImageUrlArtifact', input_types=['ImageUrlArtifact'], output_type='ImageUrlArtifact', ui_options={'is_full_width': True, 'pulse_on_run': True, 'is_custom': True, 'is_user_added': True}, mode_allowed_input=True, mode_allowed_property=True, mode_allowed_output=True, parent_container_name='', initial_setup=True))
    node4_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='KeyValuePair', specific_library_name='Griptape Nodes Library', node_name='Key Value Pair', metadata={'position': {'x': -2.600081988967247, 'y': 200.82104236312074}, 'tempId': 'placing-1766023727118-f3seci', 'library_node_metadata': {'category': 'dict', 'description': 'Create a Key Value Pair'}, 'library': 'Griptape Nodes Library', 'node_type': 'KeyValuePair', 'showaddparameter': False, 'size': {'width': 600, 'height': 284}, 'category': 'dict'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node4_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='dictionary', ui_options={'display_name': 'Key/Value Pair', 'hide': False}, initial_setup=True))
    node5_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='KeyValuePair', specific_library_name='Griptape Nodes Library', node_name='Key Value Pair_1', metadata={'position': {'x': -2.600081988967247, 'y': 508.4577249729338}, 'tempId': 'placing-1766023727118-f3seci', 'library_node_metadata': {'category': 'dict', 'description': 'Create a Key Value Pair'}, 'library': 'Griptape Nodes Library', 'node_type': 'KeyValuePair', 'showaddparameter': False, 'size': {'width': 600, 'height': 284}, 'category': 'dict'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node5_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='dictionary', ui_options={'display_name': 'Key/Value Pair', 'hide': False}, initial_setup=True))
    node6_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='KeyValuePair', specific_library_name='Griptape Nodes Library', node_name='Key Value Pair_2', metadata={'position': {'x': -2.600081988967247, 'y': 759.8078514129766}, 'tempId': 'placing-1766023727118-f3seci', 'library_node_metadata': {'category': 'dict', 'description': 'Create a Key Value Pair'}, 'library': 'Griptape Nodes Library', 'node_type': 'KeyValuePair', 'showaddparameter': False, 'size': {'width': 600, 'height': 284}, 'category': 'dict'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node6_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='dictionary', ui_options={'display_name': 'Key/Value Pair', 'hide': False}, initial_setup=True))
    node7_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='MergeTexts', specific_library_name='Griptape Nodes Library', node_name='Merge Texts', metadata={'position': {'x': 1002.176604440061, 'y': 547.3773674509565}, 'tempId': 'placing-1766024416994-ze2v3r', 'library_node_metadata': {'category': 'text', 'description': 'MergeTexts node'}, 'library': 'Griptape Nodes Library', 'node_type': 'MergeTexts', 'showaddparameter': False, 'size': {'width': 600, 'height': 428}, 'category': 'text', 'empty_merge_string_migrated': True}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node7_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='input_4', ui_options={'placeholder_text': 'Input 4', 'hide_label': False, 'hide_property': False, 'hide': True}, initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='whitespace', ui_options={'on_label': 'trim', 'off_label': 'keep', 'hide_label': False, 'hide_property': False, 'hide': True}, initial_setup=True))
    node8_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Workflow Description', metadata={'position': {'x': -1061.5751704894092, 'y': -428.097932950298}, 'tempId': 'placing-1766075246290-tahpkl', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 757, 'height': 356}, 'category': 'misc'}, initial_setup=True)).node_name
    node9_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 1', metadata={'position': {'x': -1061.5751704894092, 'y': 279.80785141297656}, 'tempId': 'placing-1766003334530-pnkgh', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 192}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node10_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 2', metadata={'position': {'x': -2.600081988967247, 'y': 39.377367450956484}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 602, 'height': 132}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node11_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 3', metadata={'position': {'x': 1002.176604440061, 'y': 316.4577249729338}, 'tempId': 'placing-1766024634893-vx3o39', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 192}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node12_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 5', metadata={'position': {'x': 1979.6649600863996, 'y': 316.4577249729338}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 194}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node13_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 4', metadata={'position': {'x': 1002.176604440061, 'y': 1138.449558862941}, 'tempId': 'placing-1766003265679-b4mek', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 192}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node14_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 6', metadata={'position': {'x': 2802.6192263139055, 'y': 316.4577249729338}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 722, 'height': 153}, 'category': 'misc'}, initial_setup=True)).node_name
    node15_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Step 7', metadata={'position': {'x': 3771.5455086365287, 'y': 316.4577249729338}, 'tempId': 'placing-1766075761957-uyggs', 'library_node_metadata': {'category': 'misc', 'description': 'Create a note node to provide helpful context in your workflow'}, 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 930, 'height': 170}, 'category': 'misc'}, initial_setup=True)).node_name
    node16_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='GoogleImageGeneration', specific_library_name='Griptape Nodes Library', node_name='Google Nano Banana Image Generation', metadata={'library_node_metadata': NodeMetadata(category='image', description='Generate images using Google models via Griptape model proxy', display_name='Google Nano Banana Image Generation', tags=None, icon='sparkles', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'GoogleImageGeneration', 'position': {'x': 2802.6192263139055, 'y': 547.3773674509565}, 'size': {'width': 750, 'height': 1303}}, initial_setup=True)).node_name
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node2_name, source_parameter_name='ruleset', target_node_name=node1_name, target_parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node0_name, source_parameter_name='product', target_node_name=node4_name, target_parameter_name='value', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node0_name, source_parameter_name='company_name', target_node_name=node5_name, target_parameter_name='value', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node0_name, source_parameter_name='company_description', target_node_name=node6_name, target_parameter_name='value', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node4_name, source_parameter_name='dictionary', target_node_name=node7_name, target_parameter_name='input_1', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node5_name, source_parameter_name='dictionary', target_node_name=node7_name, target_parameter_name='input_2', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node6_name, source_parameter_name='dictionary', target_node_name=node7_name, target_parameter_name='input_3', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node7_name, source_parameter_name='output', target_node_name=node1_name, target_parameter_name='additional_context', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node1_name, source_parameter_name='output', target_node_name=node16_name, target_parameter_name='prompt', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node16_name, source_parameter_name='image', target_node_name=node3_name, target_parameter_name='image', initial_setup=True))
    with GriptapeNodes.ContextManager().node(node0_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='product', node_name=node0_name, value=top_level_unique_values_dict['10bf13cc-b477-4d90-b129-8b1532a821fe'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='company_name', node_name=node0_name, value=top_level_unique_values_dict['89092bc7-aca0-4f69-a67e-dd56aa25e810'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='company_description', node_name=node0_name, value=top_level_unique_values_dict['7268fb5e-d50b-441b-bc86-f6582068992f'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node1_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='agent', node_name=node1_name, value=top_level_unique_values_dict['85ffb073-434b-43a3-b8d3-f1e93e539bc2'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='model', node_name=node1_name, value=top_level_unique_values_dict['0e0fed8c-49a3-4023-898e-2349b77b4580'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='prompt', node_name=node1_name, value=top_level_unique_values_dict['e70b0b9a-e60c-4d62-979c-b0ff28978400'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='additional_context', node_name=node1_name, value=top_level_unique_values_dict['ea4889b1-8247-42ee-8fb6-156a9b471ea7'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='tools', node_name=node1_name, value=top_level_unique_values_dict['77017d67-1b59-492d-80cb-e3d3b49ae7a4'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rulesets', node_name=node1_name, value=top_level_unique_values_dict['84a8ec28-c0a3-4a09-9dfe-0ec753941cab'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', node_name=node1_name, value=top_level_unique_values_dict['733f2dc7-d115-4fa6-af0f-5d725d97a7b9'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node1_name, value=top_level_unique_values_dict['f4360ed4-8b55-48e8-8be0-214d7fac382c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node1_name, value=top_level_unique_values_dict['b7ea98f1-a788-4568-80ec-c16119a5c2f5'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='include_details', node_name=node1_name, value=top_level_unique_values_dict['9d65cda2-ace4-40d5-acd2-8ba4054a66f9'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='logs', node_name=node1_name, value=top_level_unique_values_dict['de79206b-d7ff-4a16-8565-99c746c81782'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node2_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='name', node_name=node2_name, value=top_level_unique_values_dict['a835f448-d967-47df-9b8b-f8035f829e82'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rules', node_name=node2_name, value=top_level_unique_values_dict['cf32a276-0356-4e52-b8f3-4d703f5e649f'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='ruleset', node_name=node2_name, value=top_level_unique_values_dict['733f2dc7-d115-4fa6-af0f-5d725d97a7b9'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node3_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node3_name, value=top_level_unique_values_dict['e44a855e-9d77-4f7f-aa51-9ff55df9d8e6'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node3_name, value=top_level_unique_values_dict['e44a855e-9d77-4f7f-aa51-9ff55df9d8e6'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node3_name, value=top_level_unique_values_dict['731fde86-d9bf-43e9-8e5c-d41972e27307'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node3_name, value=top_level_unique_values_dict['731fde86-d9bf-43e9-8e5c-d41972e27307'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='image', node_name=node3_name, value=top_level_unique_values_dict['f3269543-6788-45b8-960b-18d318350057'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node4_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='key', node_name=node4_name, value=top_level_unique_values_dict['1bc06796-15eb-46c3-9690-1fa94cc0860a'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='value', node_name=node4_name, value=top_level_unique_values_dict['10bf13cc-b477-4d90-b129-8b1532a821fe'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node4_name, value=top_level_unique_values_dict['d944f8f2-fe76-4789-abf0-3a1089b3fd36'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node4_name, value=top_level_unique_values_dict['63d5722c-85a7-4d8c-a464-0ae8486cbcaf'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node5_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='key', node_name=node5_name, value=top_level_unique_values_dict['1f5b3f38-a795-4d13-8301-0ddc257da915'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='value', node_name=node5_name, value=top_level_unique_values_dict['89092bc7-aca0-4f69-a67e-dd56aa25e810'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node5_name, value=top_level_unique_values_dict['6d3acf14-a6b3-4ed9-b283-270f2004f141'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node5_name, value=top_level_unique_values_dict['dea2fe9c-0b5d-4f5d-b14e-df0c48b7d70f'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node6_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='key', node_name=node6_name, value=top_level_unique_values_dict['909f0d29-505d-482b-9b11-7d43411df79f'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='value', node_name=node6_name, value=top_level_unique_values_dict['7268fb5e-d50b-441b-bc86-f6582068992f'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node6_name, value=top_level_unique_values_dict['6453a546-a5e6-4fac-ae0e-e2c17a98bb41'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='dictionary', node_name=node6_name, value=top_level_unique_values_dict['7cca220f-25b6-4df7-bb9d-8fb55020762b'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node7_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_1', node_name=node7_name, value=top_level_unique_values_dict['3d312138-aa71-4616-9eb9-1d6fd25a4b7c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_2', node_name=node7_name, value=top_level_unique_values_dict['b944f1ee-c85a-4026-8582-1b333b4d8f93'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_3', node_name=node7_name, value=top_level_unique_values_dict['f76edcad-2ad0-4f4b-8443-cf3b7250ff8e'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='merge_string', node_name=node7_name, value=top_level_unique_values_dict['014e3451-8116-4d3b-b6a5-27728b1680d1'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='whitespace', node_name=node7_name, value=top_level_unique_values_dict['9d65cda2-ace4-40d5-acd2-8ba4054a66f9'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node7_name, value=top_level_unique_values_dict['ea4889b1-8247-42ee-8fb6-156a9b471ea7'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node7_name, value=top_level_unique_values_dict['ea4889b1-8247-42ee-8fb6-156a9b471ea7'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node8_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node8_name, value=top_level_unique_values_dict['466ae656-9659-4677-aea4-b1f697b7f579'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node9_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node9_name, value=top_level_unique_values_dict['41381fe3-1608-4a95-9fbc-04ab7f2ef7f2'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node10_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node10_name, value=top_level_unique_values_dict['cacef36a-e4a1-45b3-ade0-286fddda0a6a'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node11_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node11_name, value=top_level_unique_values_dict['82c46660-aef4-4bfb-bd55-c8aba8a58863'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node12_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node12_name, value=top_level_unique_values_dict['c65612f3-a402-402c-b0a8-55b97b44122e'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node13_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node13_name, value=top_level_unique_values_dict['64686c6e-4200-4760-98ef-beee2ff7fc17'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node14_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node14_name, value=top_level_unique_values_dict['5293bebc-b569-479c-8738-b3ce9616082c'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node15_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node15_name, value=top_level_unique_values_dict['204b1a64-14a3-4ef4-b751-0fd71c2681a4'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node16_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='model', node_name=node16_name, value=top_level_unique_values_dict['ed15b4d7-2975-4ead-81e2-ce8487db26c5'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='prompt', node_name=node16_name, value=top_level_unique_values_dict['b7ea98f1-a788-4568-80ec-c16119a5c2f5'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_images', node_name=node16_name, value=top_level_unique_values_dict['fc16b473-5af6-476a-b2e3-22e3b9a870c5'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='object_images', node_name=node16_name, value=top_level_unique_values_dict['625901d3-2fb8-4d5e-ba92-cd8e24591291'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='human_images', node_name=node16_name, value=top_level_unique_values_dict['92852550-f440-4c3a-a915-6c22687ab9d5'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='auto_image_resize', node_name=node16_name, value=top_level_unique_values_dict['e44a855e-9d77-4f7f-aa51-9ff55df9d8e6'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='aspect_ratio', node_name=node16_name, value=top_level_unique_values_dict['884708c8-9ec1-43e6-83b8-34d8e8e9c0b4'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='image_size', node_name=node16_name, value=top_level_unique_values_dict['4817eaf8-c076-4d42-90b5-95e19e85fb27'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='temperature', node_name=node16_name, value=top_level_unique_values_dict['a27c0f48-dec1-4beb-bf29-7038c1c1eac5'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='use_google_search', node_name=node16_name, value=top_level_unique_values_dict['9d65cda2-ace4-40d5-acd2-8ba4054a66f9'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node16_name, value=top_level_unique_values_dict['9d65cda2-ace4-40d5-acd2-8ba4054a66f9'], initial_setup=True, is_output=False))

def _ensure_workflow_context():
    context_manager = GriptapeNodes.ContextManager()
    if not context_manager.has_current_flow():
        top_level_flow_request = GetTopLevelFlowRequest()
        top_level_flow_result = GriptapeNodes.handle_request(top_level_flow_request)
        if isinstance(top_level_flow_result, GetTopLevelFlowResultSuccess) and top_level_flow_result.flow_name is not None:
            flow_manager = GriptapeNodes.FlowManager()
            flow_obj = flow_manager.get_flow_by_name(top_level_flow_result.flow_name)
            context_manager.push_flow(flow_obj)

def execute_workflow(input: dict, storage_backend: str='local', workflow_executor: WorkflowExecutor | None=None, pickle_control_flow_result: bool=False) -> dict | None:
    return asyncio.run(aexecute_workflow(input=input, storage_backend=storage_backend, workflow_executor=workflow_executor, pickle_control_flow_result=pickle_control_flow_result))

async def aexecute_workflow(input: dict, storage_backend: str='local', workflow_executor: WorkflowExecutor | None=None, pickle_control_flow_result: bool=False) -> dict | None:
    _ensure_workflow_context()
    storage_backend_enum = StorageBackend(storage_backend)
    workflow_executor = workflow_executor or LocalWorkflowExecutor(storage_backend=storage_backend_enum)
    async with workflow_executor as executor:
        await executor.arun(flow_input=input, pickle_control_flow_result=pickle_control_flow_result)
    return executor.output

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--storage-backend', choices=['local', 'gtc'], default='local', help="Storage backend to use: 'local' for local filesystem or 'gtc' for Griptape Cloud")
    parser.add_argument('--json-input', default=None, help='JSON string containing parameter values. Takes precedence over individual parameter arguments if provided.')
    parser.add_argument('--exec_out', default=None, help='Connection to the next node in the execution chain')
    parser.add_argument('--product', default=None, help='Enter text/string for product.')
    parser.add_argument('--company_name', default=None, help='Enter text/string for company_name.')
    parser.add_argument('--company_description', default=None, help='Enter text/string for company_description.')
    args = parser.parse_args()
    flow_input = {}
    if args.json_input is not None:
        flow_input = json.loads(args.json_input)
    if args.json_input is None:
        if 'Start Flow' not in flow_input:
            flow_input['Start Flow'] = {}
        if args.exec_out is not None:
            flow_input['Start Flow']['exec_out'] = args.exec_out
        if args.product is not None:
            flow_input['Start Flow']['product'] = args.product
        if args.company_name is not None:
            flow_input['Start Flow']['company_name'] = args.company_name
        if args.company_description is not None:
            flow_input['Start Flow']['company_description'] = args.company_description
    workflow_output = execute_workflow(input=flow_input, storage_backend=args.storage_backend)
    print(workflow_output)
