# /// script
# dependencies = []
# 
# [tool.griptape-nodes]
# name = "Flux 2 - Magazine Cover"
# schema_version = "0.14.0"
# engine_version_created_with = "0.66.0"
# node_libraries_referenced = [["Griptape Nodes Library", "0.52.6"]]
# node_types_used = [["Griptape Nodes Library", "Agent"], ["Griptape Nodes Library", "EndFlow"], ["Griptape Nodes Library", "Flux2ImageGeneration"], ["Griptape Nodes Library", "MergeTexts"], ["Griptape Nodes Library", "Note"], ["Griptape Nodes Library", "Ruleset"], ["Griptape Nodes Library", "StartFlow"]]
# is_griptape_provided = true
# is_template = true
# creation_date = 2025-12-17T21:14:04.445714Z
# last_modified_date = "2025-12-17T21:25:47.554625Z"
# workflow_shape = "{\"inputs\":{\"Start Flow\":{\"exec_out\":{\"name\":\"exec_out\",\"tooltip\":\"Connection to the next node in the execution chain\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Flow Out\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"text\":{\"name\":\"text\",\"tooltip\":\"New parameter\",\"type\":\"str\",\"input_types\":[\"any\"],\"output_type\":\"str\",\"default_value\":\"\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"multiline\":true,\"placeholder_text\":\"The text content to display\",\"hide_label\":false,\"hide_property\":false,\"is_custom\":true,\"is_user_added\":true,\"hide\":false,\"display_name\":\"subject\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":\"\",\"parent_element_name\":null},\"text_1\":{\"name\":\"text_1\",\"tooltip\":\"New parameter\",\"type\":\"str\",\"input_types\":[\"any\"],\"output_type\":\"str\",\"default_value\":\"\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"multiline\":true,\"placeholder_text\":\"The text content to display\",\"hide_label\":false,\"hide_property\":false,\"is_custom\":true,\"is_user_added\":true,\"hide\":false,\"display_name\":\"decade\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":\"\",\"parent_element_name\":null}}},\"outputs\":{\"End Flow\":{\"exec_in\":{\"name\":\"exec_in\",\"tooltip\":\"Control path when the flow completed successfully\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Succeeded\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"failed\":{\"name\":\"failed\",\"tooltip\":\"Control path when the flow failed\",\"type\":\"parametercontroltype\",\"input_types\":[\"parametercontroltype\"],\"output_type\":\"parametercontroltype\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"display_name\":\"Failed\"},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"was_successful\":{\"name\":\"was_successful\",\"tooltip\":\"Indicates whether it completed without errors.\",\"type\":\"bool\",\"input_types\":[\"bool\"],\"output_type\":\"bool\",\"default_value\":false,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{},\"settable\":false,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"result_details\":{\"name\":\"result_details\",\"tooltip\":\"Details about the operation result\",\"type\":\"str\",\"input_types\":[\"str\"],\"output_type\":\"str\",\"default_value\":null,\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"multiline\":true,\"placeholder_text\":\"Details about the completion or failure will be shown here.\"},\"settable\":false,\"is_user_defined\":true,\"parent_container_name\":null,\"parent_element_name\":null},\"image_url\":{\"name\":\"image_url\",\"tooltip\":\"New parameter\",\"type\":\"ImageUrlArtifact\",\"input_types\":[\"ImageUrlArtifact\"],\"output_type\":\"ImageUrlArtifact\",\"default_value\":\"\",\"tooltip_as_input\":null,\"tooltip_as_property\":null,\"tooltip_as_output\":null,\"ui_options\":{\"is_full_width\":true,\"pulse_on_run\":true,\"is_custom\":true,\"is_user_added\":true},\"settable\":true,\"is_user_defined\":true,\"parent_container_name\":\"\",\"parent_element_name\":null}}}}"
# description = "Generate an image for a topical magazine cover using Flux.2"
# image = "https://raw.githubusercontent.com/griptape-ai/griptape-nodes/refs/heads/main/libraries/griptape_nodes_library/workflows/templates/thumbnail_flux_2_-_magazine_cover.webp"
# 
# ///

import argparse
import asyncio
import json
import pickle
from griptape.artifacts.image_url_artifact import ImageUrlArtifact
from griptape.rules.ruleset import Ruleset
from griptape_nodes.bootstrap.workflow_executors.local_workflow_executor import LocalWorkflowExecutor
from griptape_nodes.bootstrap.workflow_executors.workflow_executor import WorkflowExecutor
from griptape_nodes.drivers.storage.storage_backend import StorageBackend
from griptape_nodes.node_library.library_registry import IconVariant, NodeDeprecationMetadata, NodeMetadata
from griptape_nodes.retained_mode.events.connection_events import CreateConnectionRequest
from griptape_nodes.retained_mode.events.flow_events import CreateFlowRequest, GetTopLevelFlowRequest, GetTopLevelFlowResultSuccess
from griptape_nodes.retained_mode.events.library_events import LoadLibrariesRequest
from griptape_nodes.retained_mode.events.node_events import CreateNodeRequest
from griptape_nodes.retained_mode.events.parameter_events import AddParameterToNodeRequest, AlterParameterDetailsRequest, SetParameterValueRequest
from griptape_nodes.retained_mode.griptape_nodes import GriptapeNodes

GriptapeNodes.handle_request(LoadLibrariesRequest())

context_manager = GriptapeNodes.ContextManager()

if not context_manager.has_current_workflow():
    context_manager.push_workflow(workflow_name='Flux 2 - Magazine Cover')

"""
1. We've collated all of the unique parameter values into a dictionary so that we do not have to duplicate them.
   This minimizes the size of the code, especially for large objects like serialized image files.
2. We're using a prefix so that it's clear which Flow these values are associated with.
3. The values are serialized using pickle, which is a binary format. This makes them harder to read, but makes
   them consistently save and load. It allows us to serialize complex objects like custom classes, which otherwise
   would be difficult to serialize.
"""
top_level_unique_values_dict = {'4759c8a7-c44d-473c-8559-10d56ca1d31c': pickle.loads(b'\x80\x04\x95\x0f\x00\x00\x00\x00\x00\x00\x00\x8c\x0bflux-2-flex\x94.'), 'b59a6b92-73e3-4939-9b65-198dda709014': pickle.loads(b'\x80\x04\x95\xea\x05\x00\x00\x00\x00\x00\x00X\xe3\x05\x00\x00```json\n{\n  "scene": "1990s grunge style magazine cover featuring a plastic skateboarding action figure",\n  "subjects": [\n    {\n      "description": "Plastic skateboarding action figure with baggy clothes, flannel shirt tied around waist, worn sneakers, and a skateboard with graffiti art",\n      "position": "Center cover",\n      "color_palette": ["#3b3b3b", "#6b8e23", "#d2691e", "#222222"]\n    }\n  ],\n  "style": "1990s grunge aesthetic with distressed textures, muted earth tones, and layered collage elements",\n  "typography": [\n    {\n      "text": "SKATE RAGE",\n      "placement": "Top center",\n      "font_style": "Bold distressed sans-serif",\n      "color": "#d2691e"\n    },\n    {\n      "text": "Inside: The Rise of Plastic Skate Legends",\n      "placement": "Bottom left",\n      "font_style": "Handwritten grunge font",\n      "color": "#6b8e23"\n    },\n    {\n      "text": "Flannel & Freestyle: How Grunge Meets Skate Culture",\n      "placement": "Right side middle",\n      "font_style": "Rough serif",\n      "color": "#3b3b3b"\n    },\n    {\n      "text": "DIY Skateboard Art: Spray Paint & Sticker Madness",\n      "placement": "Bottom right",\n      "font_style": "Stencil style",\n      "color": "#222222"\n    }\n  ],\n  "context": "Magazine cover layout with torn paper edges, layered textures, and a gritty urban background resembling a skate park wall",\n  "camera": {\n    "angle": "straight on",\n    "lens-mm": 50,\n    "f-number": "f/4"\n  },\n  "aspect_ratio": "4:3",\n  "resolution": "1920x1440"\n}\n```\x94.'), '6f8f7f2c-7149-4d82-84a6-7b354988dc32': pickle.loads(b'\x80\x04]\x94.'), '8c322648-bcc3-4b74-84e6-810586e6f172': pickle.loads(b'\x80\x04\x95\x04\x00\x00\x00\x00\x00\x00\x00M\x00\x06.'), '29fd59af-15c3-4c3e-9957-8d6d95a00d63': pickle.loads(b'\x80\x04\x95\x04\x00\x00\x00\x00\x00\x00\x00M\x00\x08.'), 'd244c3ed-deb1-4486-8a99-48a8cb4cecc0': pickle.loads(b'\x80\x04\x89.'), '47aa7915-6270-4193-9945-5e0a2c7970b8': pickle.loads(b'\x80\x04K*.'), 'ca321424-cfe6-4181-b73f-4aa4878c5441': pickle.loads(b'\x80\x04\x95\x08\x00\x00\x00\x00\x00\x00\x00\x8c\x04jpeg\x94.'), 'c0b31a19-482f-45f2-b108-e82805774741': pickle.loads(b'\x80\x04\x95\x15\x00\x00\x00\x00\x00\x00\x00\x8c\x11least restrictive\x94.'), '955f9224-dd49-438a-a1c5-e80a36f1c12a': pickle.loads(b'\x80\x04K2.'), '8c4ef201-7a21-49ec-bd71-122c25c3de91': pickle.loads(b'\x80\x04\x95\n\x00\x00\x00\x00\x00\x00\x00G@\x12\x00\x00\x00\x00\x00\x00.'), 'c395c58d-a24e-4507-97cd-376c8ed324b0': pickle.loads(b'\x80\x04\x95(\x00\x00\x00\x00\x00\x00\x00\x8c$f5b485d7-f087-4191-9c62-a32707cb128c\x94.'), '49f570d6-20f7-4d12-ba20-bbcf1160e026': pickle.loads(b'\x80\x04\x95<\r\x00\x00\x00\x00\x00\x00}\x94(\x8c\x02id\x94\x8c$60ef13d8-8d88-4ea8-a89c-0febbe2bde9f\x94\x8c\x06status\x94\x8c\x05Ready\x94\x8c\x06result\x94}\x94(\x8c\nstart_time\x94GA\xdaP\xc4\xf2\x17\xef\xba\x8c\x06prompt\x94X\xad\x0b\x00\x00{"scene": "High-detail 1990s grunge style magazine cover featuring a plastic skateboarding action figure photographed like a glossy toy ad, with dramatic studio lighting and strong shadows against a gritty urban backdrop", "subjects": [ { "description": "Highly detailed plastic skateboarding action figure in exaggerated 1990s streetwear, with oversized baggy jeans, a faded graphic T-shirt, a red and black flannel shirt tied around the waist, and scuffed worn sneakers. The figure has visible joint seams and a glossy plastic finish, posed mid-trick on a skateboard. The skateboard deck features bold graffiti art in neon accents over chipped paint, with scratched metal trucks and worn wheels. The toy is lit from the front with a slight side shadow to emphasize textures and contours.", "position": "Center cover, large and dominant, slightly overlapping some of the text elements", "color_palette": ["#3b3b3b", "#6b8e23", "#d2691e", "#222222"] } ], "style": "1990s grunge aesthetic with distressed textures, muted earth tones, and layered collage elements, including photocopy-style overlays, grainy film texture, visible halftone dots, and rough tape strips. Slightly desaturated colors, high contrast lighting, and a worn, aged print look.", "typography": [ { "text": "SKATE RAGE", "placement": "Top center, large masthead title spanning almost the full width of the cover", "font_style": "Bold distressed sans-serif with cracked edges and subtle misalignment, slightly warped as if printed on rough paper", "color": "#d2691e" }, { "text": "Inside: The Rise of Plastic Skate Legends", "placement": "Bottom left, in a medium-sized block overlapping the background texture but not covering the main figure", "font_style": "Handwritten grunge font with uneven baseline and ink-like strokes", "color": "#6b8e23" }, { "text": "Flannel & Freestyle: How Grunge Meets Skate Culture", "placement": "Right side middle, stacked in two or three lines alongside the action figure", "font_style": "Rough serif with slightly chipped letterforms and subtle texture", "color": "#3b3b3b" }, { "text": "DIY Skateboard Art: Spray Paint & Sticker Madness", "placement": "Bottom right, arranged as a small feature callout", "font_style": "Stencil style font with spray-paint-like overspray and cutout letters", "color": "#222222" } ], "context": "Magazine cover layout with clear margin space and balanced text blocks, featuring torn paper edges, layered textures, and collage fragments. Background resembles a grimy skate park wall with faded graffiti, peeling posters, paint drips, and subtle chain-link fence shadows. Overall look is gritty and urban, with subtle paper creases, scratches, and print imperfections to enhance the grunge mood.", "camera": { "angle": "straight on, front-facing shot of the cover as if scanned or photographed directly", "lens-mm": 50, "f-number": "f/4, moderate depth of field keeping the entire cover design sharp" }, "aspect_ratio": "4:3", "resolution": "1920x1440" }\x94\x8c\x04seed\x94K*\x8c\x06sample\x94\x8c\xe4https://bfldeliveryscus.blob.core.windows.net/results/2025/12/17/dea63360d4dd46a4bbca83d678dc164d_sample.jpeg?se=2025-12-17T20%3A45%3A14Z&sp=r&sv=2024-11-04&sr=b&rsct=image/jpeg&sig=tV7hEtHNc28t7GYo4H1U4uBjwsedFP7ZP4xOaEmfZt0%3D\x94u\x8c\x08progress\x94N\x8c\x07details\x94N\x8c\x07preview\x94Nu.'), 'd17e62cf-e74d-40c2-b2bd-0c0923679681': pickle.loads(b'\x80\x04\x95\x8a\x01\x00\x00\x00\x00\x00\x00\x8c%griptape.artifacts.image_url_artifact\x94\x8c\x10ImageUrlArtifact\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x10ImageUrlArtifact\x94\x8c\x0bmodule_name\x94\x8c%griptape.artifacts.image_url_artifact\x94\x8c\x02id\x94\x8c 8d7c3087e5824430ba2dedb9cb141aba\x94\x8c\treference\x94N\x8c\x04meta\x94}\x94\x8c\x04name\x94\x8c\x19flux_image_1766003719.jpg\x94\x8c\x16encoding_error_handler\x94\x8c\x06strict\x94\x8c\x08encoding\x94\x8c\x05utf-8\x94\x8c\x05value\x94\x8cShttp://localhost:8124/workspace/static_files/flux_image_1766003719.jpg?t=1766003719\x94ub.'), '006c70cf-5c7e-4490-871b-4eba95b77243': pickle.loads(b'\x80\x04\x88.'), '8a140dd8-8418-4f99-be06-929a10f3dabf': pickle.loads(b'\x80\x04\x95H\x00\x00\x00\x00\x00\x00\x00\x8cDImage generated successfully and saved as flux_image_1766003719.jpg.\x94.'), '92b89338-e660-4ecf-a058-fc36b0e1cfb0': pickle.loads(b'\x80\x04\x95)\x00\x00\x00\x00\x00\x00\x00\x8c%a plastic skateboarding action figure\x94.'), '64ef4d87-100a-4ad4-9a60-210ae2facf9e': pickle.loads(b'\x80\x04\x95\x10\x00\x00\x00\x00\x00\x00\x00\x8c\x0c1990s grunge\x94.'), '6c76572d-ab57-4cef-8dfd-156192f09533': pickle.loads(b'\x80\x04\x95\x8d\x18\x00\x00\x00\x00\x00\x00}\x94(\x8c\x04type\x94\x8c\x12GriptapeNodesAgent\x94\x8c\x08rulesets\x94]\x94}\x94(h\x01\x8c\x07Ruleset\x94\x8c\x02id\x94\x8c aa0c1a894a1e45a582f4d821f9f45595\x94\x8c\x04name\x94\x8c\x16Flux 2 Prompting Guide\x94\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(}\x94(h\x01\x8c\x04Rule\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94u}\x94(h\x01h\x10h\x11\x8c\xa71. **Focus on Positive Descriptions**  \n   - Avoid negative prompts. Describe what you want clearly.  \n   - Example: Use "sharp focus throughout" instead of "no blur."\x94u}\x94(h\x01h\x10h\x11\x8c\xee2. **Prompt Structure**  \n   - Follow: **Subject + Action + Style + Context**  \n   - Example:  \n     - *"Black cat hiding behind a watermelon slice, professional studio shot, bright red and turquoise background with summer mystery vibe."*\x94u}\x94(h\x01h\x10h\x11\x8c\x983. **Prioritize Word Order**  \n   - Place the most important details first: **Main subject \xe2\x86\x92 Key action \xe2\x86\x92 Style \xe2\x86\x92 Context \xe2\x86\x92 Secondary details.**\x94u}\x94(h\x01h\x10h\x11\x8c\xb34. **Prompt Length**  \n   - **Short (10\xe2\x80\x9330 words)**: Quick concepts.  \n   - **Medium (30\xe2\x80\x9380 words)**: Ideal for most prompts.  \n   - **Long (80+ words)**: For detailed scenes.\x94u}\x94(h\x01h\x10h\x11\x8c\xab5. **Photorealistic Styles**  \n   - Reference eras, cameras, or techniques for specific looks.  \n   - Example: *"Shot on Kodak Portra 400, natural grain, organic colors."*\x94u}\x94(h\x01h\x10h\x11\x8c\xb36. **Camera and Lens Details**  \n   - Specify models, lenses, and settings for realism.  \n   - Example: *"Canon 5D Mark IV, 24-70mm at 35mm, golden hour, shallow depth of field."*\x94u}\x94(h\x01h\x10h\x11\x8c\xc27. **Typography and Design**  \n   - Use quotation marks for text elements and specify placement, style, and color.  \n   - Example: *"The text \'OPEN\' appears in red neon letters above the door."*\x94u}\x94(h\x01h\x10h\x11\x8c\x9a8. **Precise Colors with HEX Codes**  \n   - Use hex codes for exact color matching.  \n   - Example: *"The vase is #02eb3c, with a background of #1a1a2e."*\x94u}\x94(h\x01h\x10h\x11\x8c\xcb9. **Multi-Language Support**  \n   - Prompt in your native language for cultural authenticity.  \n   - Example: *"Un march\xc3\xa9 alimentaire dans la campagne normande, lever de soleil, temps un peu brumeux."*\x94u}\x94(h\x01h\x10h\x11X)\x01\x00\x0010. **Comic Strips and Sequential Art**  \n    - Maintain consistent character descriptions across panels.  \n    - Example:  \n      - Panel 1: *"Worried scientist typing on glowing holographic keyboard."*  \n      - Panel 2: *"Diffusion Man glows with swirling gradients of purple and blue energy."*\x94u}\x94(h\x01h\x10h\x11X\xa6\x02\x00\x0011. **JSON for Complex Scenes**  \n    - Use structured JSON for precise control.  \n    - Example:  \n      ```json\n      {\n        "scene": "Professional studio product photography setup",\n        "subjects": [\n          {\n            "description": "Minimalist ceramic coffee mug with steam rising",\n            "position": "Center foreground",\n            "color_palette": ["matte black ceramic"]\n          }\n        ],\n        "style": "Ultra-realistic product photography",\n        "lighting": "Softbox setup creating diffused highlights",\n        "camera": {\n          "angle": "high angle",\n          "lens-mm": 85,\n          "f-number": "f/5.6"\n        }\n      }\n      ```\x94u}\x94(h\x01h\x10h\x11X-\x01\x00\x0012. **Aspect Ratios and Resolution**  \n    - Choose aspect ratios based on use case:  \n      - **1:1**: Social media.  \n      - **16:9**: Cinematic shots.  \n      - **9:16**: Mobile content.  \n      - **4:3**: Magazine layouts.  \n      - **21:9**: Panoramas.  \n    - Recommended resolution: Up to 2MP.\x94u}\x94(h\x01h\x10h\x11Xw\x01\x00\x0013. **Best Practices Summary**  \n    - **Describe What You Want**: Focus on desired elements.  \n    - **Be Specific with Colors**: Use hex codes for precision.  \n    - **Reference Camera and Style**: Specify models and techniques.  \n    - **Use Native Languages**: Prompt in culturally relevant languages.  \n    - **Structure for Control**: Use JSON for detailed automation.\n\x94ueuah\r]\x94h\x07\x8c c3a2f3c78cc84d5aa1be654f9963d202\x94\x8c\x13conversation_memory\x94}\x94(h\x01\x8c\x12ConversationMemory\x94\x8c\x04runs\x94]\x94}\x94(h\x01\x8c\x03Run\x94h\x07\x8c a4738ef37e08497b8203be577e273fd6\x94h\x0bN\x8c\x05input\x94}\x94(h\x01\x8c\x0cTextArtifact\x94h\x07\x8c 069d94c06e4a42a2a0778c1732cfbbd9\x94\x8c\treference\x94Nh\x0b}\x94h\th:h\x11XD\x01\x00\x00Create a magazine cover from specified decade of the following subject. Include an interesting title and some article titles and text. \n\nMake the image and article titles authentic to the time period.\n\nOutput only the Image Generation Prompt in JSON format\nSubject:\na plastic skateboarding action figure\nDecade:\n1990s grunge\x94u\x8c\x06output\x94}\x94(h\x01h9h\x07\x8c 518efba8956349c5937d80f866fde920\x94h;Nh\x0b}\x94\x8c\x0fis_react_prompt\x94\x89sh\th@h\x11X\xe3\x05\x00\x00```json\n{\n  "scene": "1990s grunge style magazine cover featuring a plastic skateboarding action figure",\n  "subjects": [\n    {\n      "description": "Plastic skateboarding action figure with baggy clothes, flannel shirt tied around waist, worn sneakers, and a skateboard with graffiti art",\n      "position": "Center cover",\n      "color_palette": ["#3b3b3b", "#6b8e23", "#d2691e", "#222222"]\n    }\n  ],\n  "style": "1990s grunge aesthetic with distressed textures, muted earth tones, and layered collage elements",\n  "typography": [\n    {\n      "text": "SKATE RAGE",\n      "placement": "Top center",\n      "font_style": "Bold distressed sans-serif",\n      "color": "#d2691e"\n    },\n    {\n      "text": "Inside: The Rise of Plastic Skate Legends",\n      "placement": "Bottom left",\n      "font_style": "Handwritten grunge font",\n      "color": "#6b8e23"\n    },\n    {\n      "text": "Flannel & Freestyle: How Grunge Meets Skate Culture",\n      "placement": "Right side middle",\n      "font_style": "Rough serif",\n      "color": "#3b3b3b"\n    },\n    {\n      "text": "DIY Skateboard Art: Spray Paint & Sticker Madness",\n      "placement": "Bottom right",\n      "font_style": "Stencil style",\n      "color": "#222222"\n    }\n  ],\n  "context": "Magazine cover layout with torn paper edges, layered textures, and a gritty urban background resembling a skate park wall",\n  "camera": {\n    "angle": "straight on",\n    "lens-mm": 50,\n    "f-number": "f/4"\n  },\n  "aspect_ratio": "4:3",\n  "resolution": "1920x1440"\n}\n```\x94uuah\x0b}\x94\x8c\x08max_runs\x94Nu\x8c\x1cconversation_memory_strategy\x94\x8c\rper_structure\x94\x8c\x05tasks\x94]\x94}\x94(h\x01\x8c\nPromptTask\x94h\x03]\x94h\r]\x94h\x07\x8c 32571440c30a42e496932409a5a2d6c2\x94\x8c\x05state\x94\x8c\x0eState.FINISHED\x94\x8c\nparent_ids\x94]\x94\x8c\tchild_ids\x94]\x94\x8c\x17max_meta_memory_entries\x94K\x14\x8c\x07context\x94}\x94\x8c\rprompt_driver\x94}\x94(h\x01\x8c\x19GriptapeCloudPromptDriver\x94\x8c\x0btemperature\x94G?\xb9\x99\x99\x99\x99\x99\x9a\x8c\nmax_tokens\x94N\x8c\x06stream\x94\x88\x8c\x0cextra_params\x94}\x94\x8c\x05model\x94\x8c\x0cgpt-4.1-mini\x94\x8c\x1astructured_output_strategy\x94\x8c\x06native\x94u\x8c\x05tools\x94]\x94\x8c\x0cmax_subtasks\x94K\x14uau.'), '23f11b3c-2bcd-4924-a9dc-0eb9bac390a3': pickle.loads(b'\x80\x04\x95\x10\x00\x00\x00\x00\x00\x00\x00\x8c\x0cgpt-4.1-mini\x94.'), '6157218f-67e4-4ca6-abd7-8db2fe026892': pickle.loads(b'\x80\x04\x95\x07\x01\x00\x00\x00\x00\x00\x00X\x00\x01\x00\x00Create a magazine cover from specified decade of the following subject. Include an interesting title and some article titles and text. \n\nMake the image and article titles authentic to the time period.\n\nOutput only the Image Generation Prompt in JSON format\x94.'), '6a610671-403e-4ee6-8943-c7844fa4df6c': pickle.loads(b'\x80\x04\x95G\x00\x00\x00\x00\x00\x00\x00\x8cCSubject:\na plastic skateboarding action figure\nDecade:\n1990s grunge\x94.'), '8fbe9813-077f-4dd2-bd3e-2fe2303e2a05': pickle.loads(b'\x80\x04]\x94.'), '74c17f7b-4b27-40f7-bedd-838a16e52ce0': pickle.loads(b'\x80\x04\x95J\x10\x00\x00\x00\x00\x00\x00]\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x07Ruleset\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x07Ruleset\x94\x8c\x0bmodule_name\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x02id\x94\x8c aa0c1a894a1e45a582f4d821f9f45595\x94\x8c\x04name\x94\x8c\x16Flux 2 Prompting Guide\x94\x8c\x0eruleset_driver\x94\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x12LocalRulesetDriver\x94\x93\x94)\x81\x94}\x94(h\x06\x8c\x12LocalRulesetDriver\x94h\x08\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x0fraise_not_found\x94\x88\x8c\x0bpersist_dir\x94Nub\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(\x8c\x13griptape.rules.rule\x94\x8c\x04Rule\x94\x93\x94)\x81\x94}\x94(h\x06\x8c\x04Rule\x94h\x08\x8c\x13griptape.rules.rule\x94h\x18}\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xa71. **Focus on Positive Descriptions**  \n   - Avoid negative prompts. Describe what you want clearly.  \n   - Example: Use "sharp focus throughout" instead of "no blur."\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xee2. **Prompt Structure**  \n   - Follow: **Subject + Action + Style + Context**  \n   - Example:  \n     - *"Black cat hiding behind a watermelon slice, professional studio shot, bright red and turquoise background with summer mystery vibe."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\x983. **Prioritize Word Order**  \n   - Place the most important details first: **Main subject \xe2\x86\x92 Key action \xe2\x86\x92 Style \xe2\x86\x92 Context \xe2\x86\x92 Secondary details.**\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xb34. **Prompt Length**  \n   - **Short (10\xe2\x80\x9330 words)**: Quick concepts.  \n   - **Medium (30\xe2\x80\x9380 words)**: Ideal for most prompts.  \n   - **Long (80+ words)**: For detailed scenes.\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xab5. **Photorealistic Styles**  \n   - Reference eras, cameras, or techniques for specific looks.  \n   - Example: *"Shot on Kodak Portra 400, natural grain, organic colors."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xb36. **Camera and Lens Details**  \n   - Specify models, lenses, and settings for realism.  \n   - Example: *"Canon 5D Mark IV, 24-70mm at 35mm, golden hour, shallow depth of field."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xc27. **Typography and Design**  \n   - Use quotation marks for text elements and specify placement, style, and color.  \n   - Example: *"The text \'OPEN\' appears in red neon letters above the door."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\x9a8. **Precise Colors with HEX Codes**  \n   - Use hex codes for exact color matching.  \n   - Example: *"The vase is #02eb3c, with a background of #1a1a2e."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$\x8c\xcb9. **Multi-Language Support**  \n   - Prompt in your native language for cultural authenticity.  \n   - Example: *"Un march\xc3\xa9 alimentaire dans la campagne normande, lever de soleil, temps un peu brumeux."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$X)\x01\x00\x0010. **Comic Strips and Sequential Art**  \n    - Maintain consistent character descriptions across panels.  \n    - Example:  \n      - Panel 1: *"Worried scientist typing on glowing holographic keyboard."*  \n      - Panel 2: *"Diffusion Man glows with swirling gradients of purple and blue energy."*\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$X\xa6\x02\x00\x0011. **JSON for Complex Scenes**  \n    - Use structured JSON for precise control.  \n    - Example:  \n      ```json\n      {\n        "scene": "Professional studio product photography setup",\n        "subjects": [\n          {\n            "description": "Minimalist ceramic coffee mug with steam rising",\n            "position": "Center foreground",\n            "color_palette": ["matte black ceramic"]\n          }\n        ],\n        "style": "Ultra-realistic product photography",\n        "lighting": "Softbox setup creating diffused highlights",\n        "camera": {\n          "angle": "high angle",\n          "lens-mm": 85,\n          "f-number": "f/5.6"\n        }\n      }\n      ```\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$X-\x01\x00\x0012. **Aspect Ratios and Resolution**  \n    - Choose aspect ratios based on use case:  \n      - **1:1**: Social media.  \n      - **16:9**: Cinematic shots.  \n      - **9:16**: Mobile content.  \n      - **4:3**: Magazine layouts.  \n      - **21:9**: Panoramas.  \n    - Recommended resolution: Up to 2MP.\x94ubh\x1e)\x81\x94}\x94(h\x06h!h\x08h"h\x18}\x94h$Xw\x01\x00\x0013. **Best Practices Summary**  \n    - **Describe What You Want**: Focus on desired elements.  \n    - **Be Specific with Colors**: Use hex codes for precision.  \n    - **Reference Camera and Style**: Specify models and techniques.  \n    - **Use Native Languages**: Prompt in culturally relevant languages.  \n    - **Structure for Control**: Use JSON for detailed automation.\n\x94ubeuba.'), '23cdb54e-efe9-4e44-884c-e508e654dcc1': pickle.loads(b'\x80\x04\x95G\x10\x00\x00\x00\x00\x00\x00\x8c\x16griptape.rules.ruleset\x94\x8c\x07Ruleset\x94\x93\x94)\x81\x94}\x94(\x8c\x04type\x94\x8c\x07Ruleset\x94\x8c\x0bmodule_name\x94\x8c\x16griptape.rules.ruleset\x94\x8c\x02id\x94\x8c aa0c1a894a1e45a582f4d821f9f45595\x94\x8c\x04name\x94\x8c\x16Flux 2 Prompting Guide\x94\x8c\x0eruleset_driver\x94\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x12LocalRulesetDriver\x94\x93\x94)\x81\x94}\x94(h\x05\x8c\x12LocalRulesetDriver\x94h\x07\x8c-griptape.drivers.ruleset.local_ruleset_driver\x94\x8c\x0fraise_not_found\x94\x88\x8c\x0bpersist_dir\x94Nub\x8c\x04meta\x94}\x94\x8c\x05rules\x94]\x94(\x8c\x13griptape.rules.rule\x94\x8c\x04Rule\x94\x93\x94)\x81\x94}\x94(h\x05\x8c\x04Rule\x94h\x07\x8c\x13griptape.rules.rule\x94h\x17}\x94\x8c\x05value\x94\x8c\x1f**Rules for Crafting Prompts:**\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xa71. **Focus on Positive Descriptions**  \n   - Avoid negative prompts. Describe what you want clearly.  \n   - Example: Use "sharp focus throughout" instead of "no blur."\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xee2. **Prompt Structure**  \n   - Follow: **Subject + Action + Style + Context**  \n   - Example:  \n     - *"Black cat hiding behind a watermelon slice, professional studio shot, bright red and turquoise background with summer mystery vibe."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\x983. **Prioritize Word Order**  \n   - Place the most important details first: **Main subject \xe2\x86\x92 Key action \xe2\x86\x92 Style \xe2\x86\x92 Context \xe2\x86\x92 Secondary details.**\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xb34. **Prompt Length**  \n   - **Short (10\xe2\x80\x9330 words)**: Quick concepts.  \n   - **Medium (30\xe2\x80\x9380 words)**: Ideal for most prompts.  \n   - **Long (80+ words)**: For detailed scenes.\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xab5. **Photorealistic Styles**  \n   - Reference eras, cameras, or techniques for specific looks.  \n   - Example: *"Shot on Kodak Portra 400, natural grain, organic colors."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xb36. **Camera and Lens Details**  \n   - Specify models, lenses, and settings for realism.  \n   - Example: *"Canon 5D Mark IV, 24-70mm at 35mm, golden hour, shallow depth of field."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xc27. **Typography and Design**  \n   - Use quotation marks for text elements and specify placement, style, and color.  \n   - Example: *"The text \'OPEN\' appears in red neon letters above the door."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\x9a8. **Precise Colors with HEX Codes**  \n   - Use hex codes for exact color matching.  \n   - Example: *"The vase is #02eb3c, with a background of #1a1a2e."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#\x8c\xcb9. **Multi-Language Support**  \n   - Prompt in your native language for cultural authenticity.  \n   - Example: *"Un march\xc3\xa9 alimentaire dans la campagne normande, lever de soleil, temps un peu brumeux."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#X)\x01\x00\x0010. **Comic Strips and Sequential Art**  \n    - Maintain consistent character descriptions across panels.  \n    - Example:  \n      - Panel 1: *"Worried scientist typing on glowing holographic keyboard."*  \n      - Panel 2: *"Diffusion Man glows with swirling gradients of purple and blue energy."*\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#X\xa6\x02\x00\x0011. **JSON for Complex Scenes**  \n    - Use structured JSON for precise control.  \n    - Example:  \n      ```json\n      {\n        "scene": "Professional studio product photography setup",\n        "subjects": [\n          {\n            "description": "Minimalist ceramic coffee mug with steam rising",\n            "position": "Center foreground",\n            "color_palette": ["matte black ceramic"]\n          }\n        ],\n        "style": "Ultra-realistic product photography",\n        "lighting": "Softbox setup creating diffused highlights",\n        "camera": {\n          "angle": "high angle",\n          "lens-mm": 85,\n          "f-number": "f/5.6"\n        }\n      }\n      ```\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#X-\x01\x00\x0012. **Aspect Ratios and Resolution**  \n    - Choose aspect ratios based on use case:  \n      - **1:1**: Social media.  \n      - **16:9**: Cinematic shots.  \n      - **9:16**: Mobile content.  \n      - **4:3**: Magazine layouts.  \n      - **21:9**: Panoramas.  \n    - Recommended resolution: Up to 2MP.\x94ubh\x1d)\x81\x94}\x94(h\x05h h\x07h!h\x17}\x94h#Xw\x01\x00\x0013. **Best Practices Summary**  \n    - **Describe What You Want**: Focus on desired elements.  \n    - **Be Specific with Colors**: Use hex codes for precision.  \n    - **Reference Camera and Style**: Specify models and techniques.  \n    - **Use Native Languages**: Prompt in culturally relevant languages.  \n    - **Structure for Control**: Use JSON for detailed automation.\n\x94ubeub.'), '370abea1-659c-402b-89a1-a5726fa60cac': pickle.loads(b'\x80\x04\x95\x04\x00\x00\x00\x00\x00\x00\x00\x8c\x00\x94.'), '899f164b-7926-4216-a9ab-2c3755e735f6': pickle.loads(b'\x80\x04\x95N\x00\x00\x00\x00\x00\x00\x00\x8cJ[Processing..]\n[Started processing agent..]\n\n[Finished processing agent.]\n\x94.'), '0d55bb3a-1937-415a-b178-1bef70902e94': pickle.loads(b'\x80\x04\x95\x1a\x00\x00\x00\x00\x00\x00\x00\x8c\x16Flux 2 Prompting Guide\x94.'), '25181b8f-227f-4427-84b0-c19cd73c4d94': pickle.loads(b'\x80\x04\x95\x18\r\x00\x00\x00\x00\x00\x00X\x11\r\x00\x00**Rules for Crafting Prompts:**\n\n1. **Focus on Positive Descriptions**  \n   - Avoid negative prompts. Describe what you want clearly.  \n   - Example: Use "sharp focus throughout" instead of "no blur."\n\n2. **Prompt Structure**  \n   - Follow: **Subject + Action + Style + Context**  \n   - Example:  \n     - *"Black cat hiding behind a watermelon slice, professional studio shot, bright red and turquoise background with summer mystery vibe."*\n\n3. **Prioritize Word Order**  \n   - Place the most important details first: **Main subject \xe2\x86\x92 Key action \xe2\x86\x92 Style \xe2\x86\x92 Context \xe2\x86\x92 Secondary details.**\n\n4. **Prompt Length**  \n   - **Short (10\xe2\x80\x9330 words)**: Quick concepts.  \n   - **Medium (30\xe2\x80\x9380 words)**: Ideal for most prompts.  \n   - **Long (80+ words)**: For detailed scenes.\n\n5. **Photorealistic Styles**  \n   - Reference eras, cameras, or techniques for specific looks.  \n   - Example: *"Shot on Kodak Portra 400, natural grain, organic colors."*\n\n6. **Camera and Lens Details**  \n   - Specify models, lenses, and settings for realism.  \n   - Example: *"Canon 5D Mark IV, 24-70mm at 35mm, golden hour, shallow depth of field."*\n\n7. **Typography and Design**  \n   - Use quotation marks for text elements and specify placement, style, and color.  \n   - Example: *"The text \'OPEN\' appears in red neon letters above the door."*\n\n8. **Precise Colors with HEX Codes**  \n   - Use hex codes for exact color matching.  \n   - Example: *"The vase is #02eb3c, with a background of #1a1a2e."*\n\n9. **Multi-Language Support**  \n   - Prompt in your native language for cultural authenticity.  \n   - Example: *"Un march\xc3\xa9 alimentaire dans la campagne normande, lever de soleil, temps un peu brumeux."*\n\n10. **Comic Strips and Sequential Art**  \n    - Maintain consistent character descriptions across panels.  \n    - Example:  \n      - Panel 1: *"Worried scientist typing on glowing holographic keyboard."*  \n      - Panel 2: *"Diffusion Man glows with swirling gradients of purple and blue energy."*\n\n11. **JSON for Complex Scenes**  \n    - Use structured JSON for precise control.  \n    - Example:  \n      ```json\n      {\n        "scene": "Professional studio product photography setup",\n        "subjects": [\n          {\n            "description": "Minimalist ceramic coffee mug with steam rising",\n            "position": "Center foreground",\n            "color_palette": ["matte black ceramic"]\n          }\n        ],\n        "style": "Ultra-realistic product photography",\n        "lighting": "Softbox setup creating diffused highlights",\n        "camera": {\n          "angle": "high angle",\n          "lens-mm": 85,\n          "f-number": "f/5.6"\n        }\n      }\n      ```\n\n12. **Aspect Ratios and Resolution**  \n    - Choose aspect ratios based on use case:  \n      - **1:1**: Social media.  \n      - **16:9**: Cinematic shots.  \n      - **9:16**: Mobile content.  \n      - **4:3**: Magazine layouts.  \n      - **21:9**: Panoramas.  \n    - Recommended resolution: Up to 2MP.\n\n13. **Best Practices Summary**  \n    - **Describe What You Want**: Focus on desired elements.  \n    - **Be Specific with Colors**: Use hex codes for precision.  \n    - **Reference Camera and Style**: Specify models and techniques.  \n    - **Use Native Languages**: Prompt in culturally relevant languages.  \n    - **Structure for Control**: Use JSON for detailed automation.\n\x94.'), '7e54089b-3cc5-44a0-bbe4-c19fcf10625e': pickle.loads(b'\x80\x04\x95\x0c\x00\x00\x00\x00\x00\x00\x00\x8c\x08Subject:\x94.'), 'ca8280db-6d5d-4c7e-a405-4eb4931cccb3': pickle.loads(b'\x80\x04\x95\x0b\x00\x00\x00\x00\x00\x00\x00\x8c\x07Decade:\x94.'), 'aee84c85-a6f0-4bf0-a8f3-03754e6207a2': pickle.loads(b'\x80\x04\x95\x06\x00\x00\x00\x00\x00\x00\x00\x8c\x02\\n\x94.'), '0c68683f-d2f3-4007-ae5b-eca660862470': pickle.loads(b'\x80\x04\x95\xbb\x00\x00\x00\x00\x00\x00\x00\x8c\xb7# Agent Behavior\n\nThese rules are adapted from the [Flux.2 Prompting Guide](https://docs.bfl.ai/guides/prompting_guide_flux2) and are given to the agent to help guide their responses.\x94.'), '114d2033-613d-4028-857e-5058f529897f': pickle.loads(b'\x80\x04\x95P\x00\x00\x00\x00\x00\x00\x00\x8cL# Inputs\n\nProvide a *subject* and a *decade* to create a magazine cover for.\x94.'), 'e6cfc316-73c3-4d63-8953-4b04dc9edd23': pickle.loads(b'\x80\x04\x95D\x00\x00\x00\x00\x00\x00\x00\x8c@This node merges text into a single message to send to an agent.\x94.'), '85a7b789-2095-4121-8594-69894705c947': pickle.loads(b'\x80\x04\x95\x95\x00\x00\x00\x00\x00\x00\x00\x8c\x91Using Agents to create image generation prompts helps ensure consistency in the prompt, and allows you to be a bit more free with how you prompt.\x94.'), '4a345875-c3fb-4dd1-99b6-c72076914993': pickle.loads(b'\x80\x04\x95#\x00\x00\x00\x00\x00\x00\x00\x8c\x1fGenerate the Image using Flux.2\x94.'), '623b629a-4c1b-4522-8acb-749d28e4db0c': pickle.loads(b'\x80\x04\x95R\x00\x00\x00\x00\x00\x00\x00\x8cN[SUCCEEDED] No connection provided for success or failure, assuming successful\x94.')}

'# Create the Flow, then do work within it as context.'

flow0_name = GriptapeNodes.handle_request(CreateFlowRequest(parent_flow_name=None, flow_name='ControlFlow_1', set_as_new_context=False, metadata={})).flow_name

with GriptapeNodes.ContextManager().flow(flow0_name):
    node0_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Flux2ImageGeneration', specific_library_name='Griptape Nodes Library', node_name='FLUX.2 Image Generation', metadata={'position': {'x': 2661.3255579187985, 'y': 318.1034861000248}, 'tempId': 'placing-1765996344310-3qwc9r5', 'library_node_metadata': NodeMetadata(category='image', description='Generate images using FLUX.2 models via Griptape model proxy', display_name='FLUX.2 Image Generation', tags=None, icon='Zap', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Flux2ImageGeneration', 'showaddparameter': False, 'size': {'width': 725, 'height': 1245}, 'category': 'image'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node0_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='steps', ui_options={'slider': {'min_val': 1, 'max_val': 50}, 'hide': False, 'hide_label': False, 'hide_property': False}, initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='guidance', ui_options={'slider': {'min_val': 1.5, 'max_val': 10.0}, 'hide': False, 'hide_label': False, 'hide_property': False}, initial_setup=True))
    node1_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='StartFlow', specific_library_name='Griptape Nodes Library', node_name='Start Flow', metadata={'position': {'x': -1061.5751704894092, 'y': 296.93529465485886}, 'tempId': 'placing-1765996350930-qa8fpl', 'library_node_metadata': NodeMetadata(category='workflows', description='Define the start of a workflow and pass parameters into the flow', display_name='Start Flow', tags=None, icon=None, color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'StartFlow', 'showaddparameter': True, 'size': {'width': 600, 'height': 347}, 'category': 'workflows'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node1_name):
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='text', default_value='', tooltip='New parameter', type='str', input_types=['any'], output_type='str', ui_options={'multiline': True, 'placeholder_text': 'The text content to display', 'hide_label': False, 'hide_property': False, 'is_custom': True, 'is_user_added': True, 'hide': False, 'display_name': 'subject'}, mode_allowed_input=True, mode_allowed_property=True, mode_allowed_output=True, parent_container_name='', initial_setup=True))
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='text_1', default_value='', tooltip='New parameter', type='str', input_types=['any'], output_type='str', ui_options={'multiline': True, 'placeholder_text': 'The text content to display', 'hide_label': False, 'hide_property': False, 'is_custom': True, 'is_user_added': True, 'hide': False, 'display_name': 'decade'}, mode_allowed_input=True, mode_allowed_property=True, mode_allowed_output=True, parent_container_name='', initial_setup=True))
    node2_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Agent', specific_library_name='Griptape Nodes Library', node_name='Agent_1', metadata={'position': {'x': 1557.2549453346196, 'y': 318.1034861000248}, 'tempId': 'placing-1765998525786-f45x3l', 'library_node_metadata': NodeMetadata(category='agents', description='Creates an AI agent with conversation memory and the ability to use tools', display_name='Agent', tags=None, icon=None, color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Agent', 'showaddparameter': False, 'size': {'width': 600, 'height': 1179}, 'category': 'agents'}, initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node2_name):
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='additional_context', mode_allowed_property=False, initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='tools', ui_options={'hide': True}, initial_setup=True))
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', default_value=[], tooltip='Rulesets to apply to the agent to control its behavior.', type='Ruleset', input_types=['Ruleset', 'list[Ruleset]'], output_type='Ruleset', ui_options={}, mode_allowed_input=True, mode_allowed_property=False, mode_allowed_output=False, is_user_defined=True, settable=True, parent_container_name='rulesets', initial_setup=True))
        GriptapeNodes.handle_request(AlterParameterDetailsRequest(parameter_name='output_schema', ui_options={'hide_property': True, 'hide': True}, initial_setup=True))
    node3_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Ruleset', specific_library_name='Griptape Nodes Library', node_name='Ruleset_1', metadata={'position': {'x': 317.95518627798435, 'y': 1034.4307625437752}, 'tempId': 'placing-1765998085117-ktqra', 'library_node_metadata': NodeMetadata(category='agents/rules', description='Give an agent a set of rules and behaviors to follow', display_name='Ruleset', tags=None, icon=None, color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Ruleset', 'showaddparameter': False, 'size': {'width': 864, 'height': 410}, 'category': 'agents/rules'}, resolution='resolved', initial_setup=True)).node_name
    node4_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='MergeTexts', specific_library_name='Griptape Nodes Library', node_name='Merge Texts', metadata={'position': {'x': 487.6351386036997, 'y': 258.80785141297656}, 'tempId': 'placing-1766002459782-pzdym9', 'library_node_metadata': NodeMetadata(category='text', description='MergeTexts node', display_name='Merge Texts', tags=None, icon='merge', color=None, group='merge', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'MergeTexts', 'showaddparameter': False, 'size': {'width': 600, 'height': 500}, 'category': 'text', 'empty_merge_string_migrated': True}, resolution='resolved', initial_setup=True)).node_name
    node5_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Note', metadata={'position': {'x': -333.85466712311245, 'y': 1034.4307625437752}, 'tempId': 'placing-1766003265679-b4mek', 'library_node_metadata': NodeMetadata(category='misc', description='Create a note node to provide helpful context in your workflow', display_name='Note', tags=None, icon='notepad-text', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 192}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node6_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Note_1', metadata={'position': {'x': -1061.5751704894092, 'y': 66.80785141297656}, 'tempId': 'placing-1766003334530-pnkgh', 'library_node_metadata': NodeMetadata(category='misc', description='Create a note node to provide helpful context in your workflow', display_name='Note', tags=None, icon='notepad-text', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 192}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node7_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Note_2', metadata={'position': {'x': 487.6351386036997, 'y': 96.80785141297656}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': NodeMetadata(category='misc', description='Create a note node to provide helpful context in your workflow', display_name='Note', tags=None, icon='notepad-text', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 602, 'height': 132}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node8_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Note_3', metadata={'position': {'x': 1557.2549453346196, 'y': 126.80785141297656}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': NodeMetadata(category='misc', description='Create a note node to provide helpful context in your workflow', display_name='Note', tags=None, icon='notepad-text', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 600, 'height': 163}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node9_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='Note', specific_library_name='Griptape Nodes Library', node_name='Note_4', metadata={'position': {'x': 2661.3255579187985, 'y': 126.80785141297656}, 'tempId': 'placing-1766003370124-fo9hq', 'library_node_metadata': NodeMetadata(category='misc', description='Create a note node to provide helpful context in your workflow', display_name='Note', tags=None, icon='notepad-text', color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'Note', 'showaddparameter': False, 'size': {'width': 722, 'height': 153}, 'category': 'misc'}, resolution='resolved', initial_setup=True)).node_name
    node10_name = GriptapeNodes.handle_request(CreateNodeRequest(node_type='EndFlow', specific_library_name='Griptape Nodes Library', node_name='End Flow', metadata={'position': {'x': 3878.654434551871, 'y': 289.80785141297656}, 'tempId': 'placing-1766003522860-5ouiyv', 'library_node_metadata': NodeMetadata(category='workflows', description='Define the end of a workflow and return parameters from the flow', display_name='End Flow', tags=None, icon=None, color=None, group='create', deprecation=None, is_node_group=None), 'library': 'Griptape Nodes Library', 'node_type': 'EndFlow', 'showaddparameter': True, 'size': {'width': 945, 'height': 1244}, 'category': 'workflows'}, resolution='resolved', initial_setup=True)).node_name
    with GriptapeNodes.ContextManager().node(node10_name):
        GriptapeNodes.handle_request(AddParameterToNodeRequest(parameter_name='image_url', default_value='', tooltip='New parameter', type='ImageUrlArtifact', input_types=['ImageUrlArtifact'], output_type='ImageUrlArtifact', ui_options={'is_full_width': True, 'pulse_on_run': True, 'is_custom': True, 'is_user_added': True}, mode_allowed_input=True, mode_allowed_property=True, mode_allowed_output=True, parent_container_name='', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node2_name, source_parameter_name='output', target_node_name=node0_name, target_parameter_name='prompt', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node3_name, source_parameter_name='ruleset', target_node_name=node2_name, target_parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node1_name, source_parameter_name='text', target_node_name=node4_name, target_parameter_name='input_2', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node1_name, source_parameter_name='text_1', target_node_name=node4_name, target_parameter_name='input_4', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node4_name, source_parameter_name='output', target_node_name=node2_name, target_parameter_name='additional_context', initial_setup=True))
    GriptapeNodes.handle_request(CreateConnectionRequest(source_node_name=node0_name, source_parameter_name='image_url', target_node_name=node10_name, target_parameter_name='image_url', initial_setup=True))
    with GriptapeNodes.ContextManager().node(node0_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='model', node_name=node0_name, value=top_level_unique_values_dict['4759c8a7-c44d-473c-8559-10d56ca1d31c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='prompt', node_name=node0_name, value=top_level_unique_values_dict['b59a6b92-73e3-4939-9b65-198dda709014'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_images', node_name=node0_name, value=top_level_unique_values_dict['6f8f7f2c-7149-4d82-84a6-7b354988dc32'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='width', node_name=node0_name, value=top_level_unique_values_dict['8c322648-bcc3-4b74-84e6-810586e6f172'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='height', node_name=node0_name, value=top_level_unique_values_dict['29fd59af-15c3-4c3e-9957-8d6d95a00d63'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='randomize_seed', node_name=node0_name, value=top_level_unique_values_dict['d244c3ed-deb1-4486-8a99-48a8cb4cecc0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='seed', node_name=node0_name, value=top_level_unique_values_dict['47aa7915-6270-4193-9945-5e0a2c7970b8'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output_format', node_name=node0_name, value=top_level_unique_values_dict['ca321424-cfe6-4181-b73f-4aa4878c5441'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='safety_tolerance', node_name=node0_name, value=top_level_unique_values_dict['c0b31a19-482f-45f2-b108-e82805774741'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='steps', node_name=node0_name, value=top_level_unique_values_dict['955f9224-dd49-438a-a1c5-e80a36f1c12a'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='guidance', node_name=node0_name, value=top_level_unique_values_dict['8c4ef201-7a21-49ec-bd71-122c25c3de91'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='generation_id', node_name=node0_name, value=top_level_unique_values_dict['c395c58d-a24e-4507-97cd-376c8ed324b0'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='provider_response', node_name=node0_name, value=top_level_unique_values_dict['49f570d6-20f7-4d12-ba20-bbcf1160e026'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='image_url', node_name=node0_name, value=top_level_unique_values_dict['d17e62cf-e74d-40c2-b2bd-0c0923679681'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node0_name, value=top_level_unique_values_dict['006c70cf-5c7e-4490-871b-4eba95b77243'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node0_name, value=top_level_unique_values_dict['006c70cf-5c7e-4490-871b-4eba95b77243'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node0_name, value=top_level_unique_values_dict['8a140dd8-8418-4f99-be06-929a10f3dabf'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node0_name, value=top_level_unique_values_dict['8a140dd8-8418-4f99-be06-929a10f3dabf'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node1_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='text', node_name=node1_name, value=top_level_unique_values_dict['92b89338-e660-4ecf-a058-fc36b0e1cfb0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='text_1', node_name=node1_name, value=top_level_unique_values_dict['64ef4d87-100a-4ad4-9a60-210ae2facf9e'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node2_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='agent', node_name=node2_name, value=top_level_unique_values_dict['6c76572d-ab57-4cef-8dfd-156192f09533'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='model', node_name=node2_name, value=top_level_unique_values_dict['23f11b3c-2bcd-4924-a9dc-0eb9bac390a3'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='prompt', node_name=node2_name, value=top_level_unique_values_dict['6157218f-67e4-4ca6-abd7-8db2fe026892'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='additional_context', node_name=node2_name, value=top_level_unique_values_dict['6a610671-403e-4ee6-8943-c7844fa4df6c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='tools', node_name=node2_name, value=top_level_unique_values_dict['8fbe9813-077f-4dd2-bd3e-2fe2303e2a05'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rulesets', node_name=node2_name, value=top_level_unique_values_dict['74c17f7b-4b27-40f7-bedd-838a16e52ce0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rulesets_ParameterListUniqueParamID_6df8ae9c0e1a4a1881fc4f3986fbab35', node_name=node2_name, value=top_level_unique_values_dict['23cdb54e-efe9-4e44-884c-e508e654dcc1'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node2_name, value=top_level_unique_values_dict['370abea1-659c-402b-89a1-a5726fa60cac'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node2_name, value=top_level_unique_values_dict['b59a6b92-73e3-4939-9b65-198dda709014'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='include_details', node_name=node2_name, value=top_level_unique_values_dict['d244c3ed-deb1-4486-8a99-48a8cb4cecc0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='logs', node_name=node2_name, value=top_level_unique_values_dict['899f164b-7926-4216-a9ab-2c3755e735f6'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node3_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='name', node_name=node3_name, value=top_level_unique_values_dict['0d55bb3a-1937-415a-b178-1bef70902e94'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='rules', node_name=node3_name, value=top_level_unique_values_dict['25181b8f-227f-4427-84b0-c19cd73c4d94'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='ruleset', node_name=node3_name, value=top_level_unique_values_dict['23cdb54e-efe9-4e44-884c-e508e654dcc1'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node4_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_1', node_name=node4_name, value=top_level_unique_values_dict['7e54089b-3cc5-44a0-bbe4-c19fcf10625e'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_2', node_name=node4_name, value=top_level_unique_values_dict['92b89338-e660-4ecf-a058-fc36b0e1cfb0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_3', node_name=node4_name, value=top_level_unique_values_dict['ca8280db-6d5d-4c7e-a405-4eb4931cccb3'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='input_4', node_name=node4_name, value=top_level_unique_values_dict['64ef4d87-100a-4ad4-9a60-210ae2facf9e'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='merge_string', node_name=node4_name, value=top_level_unique_values_dict['aee84c85-a6f0-4bf0-a8f3-03754e6207a2'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='whitespace', node_name=node4_name, value=top_level_unique_values_dict['d244c3ed-deb1-4486-8a99-48a8cb4cecc0'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node4_name, value=top_level_unique_values_dict['6a610671-403e-4ee6-8943-c7844fa4df6c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='output', node_name=node4_name, value=top_level_unique_values_dict['6a610671-403e-4ee6-8943-c7844fa4df6c'], initial_setup=True, is_output=True))
    with GriptapeNodes.ContextManager().node(node5_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node5_name, value=top_level_unique_values_dict['0c68683f-d2f3-4007-ae5b-eca660862470'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node6_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node6_name, value=top_level_unique_values_dict['114d2033-613d-4028-857e-5058f529897f'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node7_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node7_name, value=top_level_unique_values_dict['e6cfc316-73c3-4d63-8953-4b04dc9edd23'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node8_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node8_name, value=top_level_unique_values_dict['85a7b789-2095-4121-8594-69894705c947'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node9_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='note', node_name=node9_name, value=top_level_unique_values_dict['4a345875-c3fb-4dd1-99b6-c72076914993'], initial_setup=True, is_output=False))
    with GriptapeNodes.ContextManager().node(node10_name):
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node10_name, value=top_level_unique_values_dict['006c70cf-5c7e-4490-871b-4eba95b77243'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='was_successful', node_name=node10_name, value=top_level_unique_values_dict['006c70cf-5c7e-4490-871b-4eba95b77243'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node10_name, value=top_level_unique_values_dict['623b629a-4c1b-4522-8acb-749d28e4db0c'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='result_details', node_name=node10_name, value=top_level_unique_values_dict['623b629a-4c1b-4522-8acb-749d28e4db0c'], initial_setup=True, is_output=True))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='image_url', node_name=node10_name, value=top_level_unique_values_dict['d17e62cf-e74d-40c2-b2bd-0c0923679681'], initial_setup=True, is_output=False))
        GriptapeNodes.handle_request(SetParameterValueRequest(parameter_name='image_url', node_name=node10_name, value=top_level_unique_values_dict['d17e62cf-e74d-40c2-b2bd-0c0923679681'], initial_setup=True, is_output=True))

def _ensure_workflow_context():
    context_manager = GriptapeNodes.ContextManager()
    if not context_manager.has_current_flow():
        top_level_flow_request = GetTopLevelFlowRequest()
        top_level_flow_result = GriptapeNodes.handle_request(top_level_flow_request)
        if isinstance(top_level_flow_result, GetTopLevelFlowResultSuccess) and top_level_flow_result.flow_name is not None:
            flow_manager = GriptapeNodes.FlowManager()
            flow_obj = flow_manager.get_flow_by_name(top_level_flow_result.flow_name)
            context_manager.push_flow(flow_obj)

def execute_workflow(input: dict, storage_backend: str='local', workflow_executor: WorkflowExecutor | None=None, pickle_control_flow_result: bool=False) -> dict | None:
    return asyncio.run(aexecute_workflow(input=input, storage_backend=storage_backend, workflow_executor=workflow_executor, pickle_control_flow_result=pickle_control_flow_result))

async def aexecute_workflow(input: dict, storage_backend: str='local', workflow_executor: WorkflowExecutor | None=None, pickle_control_flow_result: bool=False) -> dict | None:
    _ensure_workflow_context()
    storage_backend_enum = StorageBackend(storage_backend)
    workflow_executor = workflow_executor or LocalWorkflowExecutor(storage_backend=storage_backend_enum)
    async with workflow_executor as executor:
        await executor.arun(flow_input=input, pickle_control_flow_result=pickle_control_flow_result)
    return executor.output

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--storage-backend', choices=['local', 'gtc'], default='local', help="Storage backend to use: 'local' for local filesystem or 'gtc' for Griptape Cloud")
    parser.add_argument('--json-input', default=None, help='JSON string containing parameter values. Takes precedence over individual parameter arguments if provided.')
    parser.add_argument('--exec_out', default=None, help='Connection to the next node in the execution chain')
    parser.add_argument('--text', default=None, help='New parameter')
    parser.add_argument('--text_1', default=None, help='New parameter')
    args = parser.parse_args()
    flow_input = {}
    if args.json_input is not None:
        flow_input = json.loads(args.json_input)
    if args.json_input is None:
        if 'Start Flow' not in flow_input:
            flow_input['Start Flow'] = {}
        if args.exec_out is not None:
            flow_input['Start Flow']['exec_out'] = args.exec_out
        if args.text is not None:
            flow_input['Start Flow']['text'] = args.text
        if args.text_1 is not None:
            flow_input['Start Flow']['text_1'] = args.text_1
    workflow_output = execute_workflow(input=flow_input, storage_backend=args.storage_backend)
    print(workflow_output)
